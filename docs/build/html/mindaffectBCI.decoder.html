

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mindaffectBCI.decoder package &mdash; mindaffectBCI - documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="mindaffectBCI.decoder.offline package" href="mindaffectBCI.decoder.offline.html" />
    <link rel="prev" title="mindaffectBCI package" href="mindaffectBCI.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> mindaffectBCI
          

          
            
            <img src="_static/MindAffect_Logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="OnlineBCI_quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">mindaffectBCI</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="mindaffectBCI.html">mindaffectBCI package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="mindaffectBCI.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">mindaffectBCI.decoder package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="mindaffectBCI.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindaffectBCI.html#module-mindaffectBCI.noisetag">mindaffectBCI.noisetag module</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindaffectBCI.html#module-mindaffectBCI.online_bci">mindaffectBCI.online_bci module</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindaffectBCI.html#module-mindaffectBCI.online_bci_pi">mindaffectBCI.online_bci_pi module</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindaffectBCI.html#module-mindaffectBCI.ssdpDiscover">mindaffectBCI.ssdpDiscover module</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindaffectBCI.html#module-mindaffectBCI.stimseq">mindaffectBCI.stimseq module</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindaffectBCI.html#module-mindaffectBCI.utopia2output">mindaffectBCI.utopia2output module</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindaffectBCI.html#module-mindaffectBCI.utopiaController">mindaffectBCI.utopiaController module</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindaffectBCI.html#module-mindaffectBCI.utopiaclient">mindaffectBCI.utopiaclient module</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindaffectBCI.html#module-mindaffectBCI">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">The headset</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="printing_guide.html">Print Your Own Headset</a></li>
<li class="toctree-l1"><a class="reference internal" href="fitting_guide.html">Setup &amp; fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="headset_layout.html">Headset layout</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mindaffectBCI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">mindaffectBCI</a> &raquo;</li>
        
          <li><a href="mindaffectBCI.html">mindaffectBCI package</a> &raquo;</li>
        
      <li>mindaffectBCI.decoder package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/mindaffectBCI.decoder.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="mindaffectbci-decoder-package">
<h1>mindaffectBCI.decoder package<a class="headerlink" href="#mindaffectbci-decoder-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="mindaffectBCI.decoder.offline.html">mindaffectBCI.decoder.offline package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#module-mindaffectBCI.decoder.offline.load_brainsonfire">mindaffectBCI.decoder.offline.load_brainsonfire module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#module-mindaffectBCI.decoder.offline.load_brainstream">mindaffectBCI.decoder.offline.load_brainstream module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#module-mindaffectBCI.decoder.offline.load_cocktail">mindaffectBCI.decoder.offline.load_cocktail module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#module-mindaffectBCI.decoder.offline.load_mTRF_audio">mindaffectBCI.decoder.offline.load_mTRF_audio module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#module-mindaffectBCI.decoder.offline.load_mark_EMG">mindaffectBCI.decoder.offline.load_mark_EMG module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#module-mindaffectBCI.decoder.offline.load_mindaffectBCI">mindaffectBCI.decoder.offline.load_mindaffectBCI module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#module-mindaffectBCI.decoder.offline.load_ninapro_db2">mindaffectBCI.decoder.offline.load_ninapro_db2 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#module-mindaffectBCI.decoder.offline.load_openBMI">mindaffectBCI.decoder.offline.load_openBMI module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#module-mindaffectBCI.decoder.offline.load_p300_prn">mindaffectBCI.decoder.offline.load_p300_prn module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#module-mindaffectBCI.decoder.offline.load_twofinger">mindaffectBCI.decoder.offline.load_twofinger module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#module-mindaffectBCI.decoder.offline.read_buffer_offline">mindaffectBCI.decoder.offline.read_buffer_offline module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#module-mindaffectBCI.decoder.offline.read_mindaffectBCI">mindaffectBCI.decoder.offline.read_mindaffectBCI module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindaffectBCI.decoder.offline.html#module-mindaffectBCI.decoder.offline">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-mindaffectBCI.decoder.FileProxyHub">
<span id="mindaffectbci-decoder-fileproxyhub-module"></span><h2>mindaffectBCI.decoder.FileProxyHub module<a class="headerlink" href="#module-mindaffectBCI.decoder.FileProxyHub" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="mindaffectBCI.decoder.FileProxyHub.FileProxyHub">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.FileProxyHub.</code><code class="sig-name descname">FileProxyHub</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">speedup</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">use_server_ts</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/FileProxyHub.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.FileProxyHub.FileProxyHub" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Proxy UtopiaClient which gets messages from a saved log file</p>
<dl class="py method">
<dt id="mindaffectBCI.decoder.FileProxyHub.FileProxyHub.autoconnect">
<code class="sig-name descname">autoconnect</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/FileProxyHub.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.FileProxyHub.FileProxyHub.autoconnect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.FileProxyHub.FileProxyHub.getNewMessages">
<code class="sig-name descname">getNewMessages</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout_ms</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/FileProxyHub.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.FileProxyHub.FileProxyHub.getNewMessages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.FileProxyHub.FileProxyHub.getTimeStamp">
<code class="sig-name descname">getTimeStamp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/FileProxyHub.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.FileProxyHub.FileProxyHub.getTimeStamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.FileProxyHub.FileProxyHub.sendMessage">
<code class="sig-name descname">sendMessage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/FileProxyHub.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.FileProxyHub.FileProxyHub.sendMessage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.FileProxyHub.testcase">
<code class="sig-prename descclassname">mindaffectBCI.decoder.FileProxyHub.</code><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">fs</span><span class="o">=</span><span class="default_value">200</span></em>, <em class="sig-param"><span class="n">ofs</span><span class="o">=</span><span class="default_value">200</span></em>, <em class="sig-param"><span class="n">stopband</span><span class="o">=</span><span class="default_value">45, 65, 0, 3, 25, - 1</span></em>, <em class="sig-param"><span class="n">order</span><span class="o">=</span><span class="default_value">4</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/FileProxyHub.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.FileProxyHub.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.UtopiaDataInterface">
<span id="mindaffectbci-decoder-utopiadatainterface-module"></span><h2>mindaffectBCI.decoder.UtopiaDataInterface module<a class="headerlink" href="#module-mindaffectBCI.decoder.UtopiaDataInterface" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.UtopiaDataInterface.</code><code class="sig-name descname">UtopiaDataInterface</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">datawindow_ms</span><span class="o">=</span><span class="default_value">60000</span></em>, <em class="sig-param"><span class="n">msgwindow_ms</span><span class="o">=</span><span class="default_value">60000</span></em>, <em class="sig-param"><span class="n">data_preprocessor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stimulus_preprocessor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">send_signalquality</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout_ms</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">mintime_ms</span><span class="o">=</span><span class="default_value">50</span></em>, <em class="sig-param"><span class="n">fs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">U</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sample2timestamp</span><span class="o">=</span><span class="default_value">'lower_bound_tracker'</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.VERBOSITY">
<code class="sig-name descname">VERBOSITY</code><em class="property"> = 1</em><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.VERBOSITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.add_sample_timestamps">
<code class="sig-name descname">add_sample_timestamps</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">timestamp</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">fs</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.add_sample_timestamps" title="Permalink to this definition">¶</a></dt>
<dd><p>add per-sample timestamp information to the data matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> (<em>np.ndarray</em>) – (t,d) the data matrix to attach time stamps to</p></li>
<li><p><strong>timestamp</strong> (<em>float</em>) – the timestamp of the last sample of d</p></li>
<li><p><strong>fs</strong> (<em>float</em>) – the nomional sample rate of d</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(t,d+1) data matrix with attached time-stamp channel</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.connect">
<code class="sig-name descname">connect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">host</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">port</span><span class="o">=</span><span class="default_value">- 1</span></em>, <em class="sig-param"><span class="n">queryifhostnotfound</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>make a connection to the utopia host</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.extract_data_segment">
<code class="sig-name descname">extract_data_segment</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bgn_ts</span></em>, <em class="sig-param"><span class="n">end_ts</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.extract_data_segment" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.extract_msgs_segment">
<code class="sig-name descname">extract_msgs_segment</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bgn_ts</span></em>, <em class="sig-param"><span class="n">end_ts</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.extract_msgs_segment" title="Permalink to this definition">¶</a></dt>
<dd><p>extract the messages between start/end time stamps</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.extract_stimulus_segment">
<code class="sig-name descname">extract_stimulus_segment</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bgn_ts</span></em>, <em class="sig-param"><span class="n">end_ts</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.extract_stimulus_segment" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.getNewMessages">
<code class="sig-name descname">getNewMessages</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout_ms</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.getNewMessages" title="Permalink to this definition">¶</a></dt>
<dd><p>get new messages from the UtopiaHub</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.getTimeStamp">
<code class="sig-name descname">getTimeStamp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.getTimeStamp" title="Permalink to this definition">¶</a></dt>
<dd><p>get the current timeStamp</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.initDataRingBuffer">
<code class="sig-name descname">initDataRingBuffer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.initDataRingBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>initialize the data ring buffer, by getting some seed messages and datapackets to get the data sizes etc.</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.initStimulusRingBuffer">
<code class="sig-name descname">initStimulusRingBuffer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.initStimulusRingBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>initialize the data ring buffer, by getting some seed messages and datapackets to get the data sizes etc.</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.isConnected">
<code class="sig-name descname">isConnected</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.isConnected" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.plot_raw_preproc_data">
<code class="sig-name descname">plot_raw_preproc_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d_raw</span></em>, <em class="sig-param"><span class="n">d_preproc</span></em>, <em class="sig-param"><span class="n">ts</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.plot_raw_preproc_data" title="Permalink to this definition">¶</a></dt>
<dd><p>debugging function to check the diff between the raw and pre-processed data</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.preprocess_message">
<code class="sig-name descname">preprocess_message</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">m</span><span class="p">:</span> <span class="n"><a class="reference internal" href="mindaffectBCI.html#mindaffectBCI.utopiaclient.UtopiaMessage" title="mindaffectBCI.utopiaclient.UtopiaMessage">mindaffectBCI.utopiaclient.UtopiaMessage</a></span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.preprocess_message" title="Permalink to this definition">¶</a></dt>
<dd><p>apply pre-processing to topia message before any more work</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.processDataPacket">
<code class="sig-name descname">processDataPacket</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">m</span><span class="p">:</span> <span class="n"><a class="reference internal" href="mindaffectBCI.html#mindaffectBCI.utopiaclient.DataPacket" title="mindaffectBCI.utopiaclient.DataPacket">mindaffectBCI.utopiaclient.DataPacket</a></span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.processDataPacket" title="Permalink to this definition">¶</a></dt>
<dd><p>pre-process a datapacket message ready to be inserted into the ringbuffer</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.processStimulusEvent">
<code class="sig-name descname">processStimulusEvent</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">m</span><span class="p">:</span> <span class="n"><a class="reference internal" href="mindaffectBCI.html#mindaffectBCI.utopiaclient.StimulusEvent" title="mindaffectBCI.utopiaclient.StimulusEvent">mindaffectBCI.utopiaclient.StimulusEvent</a></span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.processStimulusEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>pre-process a StimulusEvent message ready to be inserted into the stimulus ringbuffer</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.push_back_newmsgs">
<code class="sig-name descname">push_back_newmsgs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">oldmsgs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.push_back_newmsgs" title="Permalink to this definition">¶</a></dt>
<dd><p>put unprocessed messages back onto the  newmessages queue</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout_ms</span><span class="o">=</span><span class="default_value">30000</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.run" title="Permalink to this definition">¶</a></dt>
<dd><p>test run the interface forever, just getting and storing data</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.sendMessage">
<code class="sig-name descname">sendMessage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span><span class="p">:</span> <span class="n"><a class="reference internal" href="mindaffectBCI.html#mindaffectBCI.utopiaclient.UtopiaMessage" title="mindaffectBCI.utopiaclient.UtopiaMessage">mindaffectBCI.utopiaclient.UtopiaMessage</a></span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.sendMessage" title="Permalink to this definition">¶</a></dt>
<dd><p>send a UtopiaMessage to the utopia hub</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout_ms</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mintime_ms</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the tracking state w.r.t. the utopia-hub.</p>
<p>By adding data to the data_ringbuffer and (non-data) messages
to the messages ring buffer.</p>
<dl class="simple">
<dt>Args</dt><dd><dl class="simple">
<dt>timeout_ms<span class="classifier">int</span></dt><dd><p>max block waiting for messages before returning</p>
</dd>
<dt>mintime_ms<span class="classifier">int</span></dt><dd><p>min time to accumulate messages before returning</p>
</dd>
</dl>
</dd>
<dt>Returns</dt><dd><dl class="simple">
<dt>newmsgs<span class="classifier">[newMsgs :UtopiaMessage]</span></dt><dd><p>list of the <em>new</em> utopia messages from the server</p>
</dd>
<dt>nsamp: int</dt><dd><p>number of new data samples in this call
Note: use data_ringbuffer[-nsamp:,…] to get the new data</p>
</dd>
<dt>nstimulus<span class="classifier">int</span></dt><dd><p>number of new stimulus events in this call
Note: use stimulus_ringbuffer[-nstimulus:,…] to get the new data</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.update_and_send_ElectrodeQualities">
<code class="sig-name descname">update_and_send_ElectrodeQualities</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d_raw</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">d_preproc</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">ts</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.update_and_send_ElectrodeQualities" title="Permalink to this definition">¶</a></dt>
<dd><p>compute running estimate of electrode qality and stream it</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.update_electrode_powers">
<code class="sig-name descname">update_electrode_powers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d_raw</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">d_preproc</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface.update_electrode_powers" title="Permalink to this definition">¶</a></dt>
<dd><p>track exp-weighted-moving average centered power for 2 input streams</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.butterfilt_and_downsample">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.UtopiaDataInterface.</code><code class="sig-name descname">butterfilt_and_downsample</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stopband</span><span class="o">=</span><span class="default_value">0, 5, 5, - 1</span></em>, <em class="sig-param"><span class="n">order</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">6</span></em>, <em class="sig-param"><span class="n">fs</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">250</span></em>, <em class="sig-param"><span class="n">fs_out</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">60</span></em>, <em class="sig-param"><span class="n">ftype</span><span class="o">=</span><span class="default_value">'butter'</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.butterfilt_and_downsample" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.TransformerMixin</span></code></p>
<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.butterfilt_and_downsample.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">fs</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">zi</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.butterfilt_and_downsample.fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.butterfilt_and_downsample.testcase">
<em class="property">static </em><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.butterfilt_and_downsample.testcase" title="Permalink to this definition">¶</a></dt>
<dd><p>test the filt+downsample transformation filter by incremental calling</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.butterfilt_and_downsample.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.butterfilt_and_downsample.transform" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.power_tracker">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.UtopiaDataInterface.</code><code class="sig-name descname">power_tracker</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">halflife_mu_ms</span></em>, <em class="sig-param"><span class="n">halflife_power_ms</span></em>, <em class="sig-param"><span class="n">fs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.power_tracker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.TransformerMixin</span></code></p>
<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.power_tracker.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.power_tracker.fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.power_tracker.hl2alpha">
<code class="sig-name descname">hl2alpha</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hl</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.power_tracker.hl2alpha" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.power_tracker.mean">
<code class="sig-name descname">mean</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.power_tracker.mean" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.power_tracker.power">
<code class="sig-name descname">power</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.power_tracker.power" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.power_tracker.testcase">
<code class="sig-name descname">testcase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.power_tracker.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.power_tracker.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.power_tracker.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>compute the exponientially weighted centered power of X</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.stim2eventfilt">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.UtopiaDataInterface.</code><code class="sig-name descname">stim2eventfilt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">histlen</span><span class="o">=</span><span class="default_value">20</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.stim2eventfilt" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.TransformerMixin</span></code></p>
<p>transformer to transform a sequence of stimulus states to a brain event sequence</p>
<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.stim2eventfilt.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.stim2eventfilt.fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.stim2eventfilt.testcase">
<code class="sig-name descname">testcase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.stim2eventfilt.testcase" title="Permalink to this definition">¶</a></dt>
<dd><p>test the stimulus transformation filter by incremental calling</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.stim2eventfilt.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.stim2eventfilt.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>transform Stimulus-encoded to brain-encoded</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.testERP">
<code class="sig-prename descclassname">mindaffectBCI.decoder.UtopiaDataInterface.</code><code class="sig-name descname">testERP</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.testERP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.testElectrodeQualities">
<code class="sig-prename descclassname">mindaffectBCI.decoder.UtopiaDataInterface.</code><code class="sig-name descname">testElectrodeQualities</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">fs</span><span class="o">=</span><span class="default_value">200</span></em>, <em class="sig-param"><span class="n">pktsize</span><span class="o">=</span><span class="default_value">20</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.testElectrodeQualities" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.testFileProxy">
<code class="sig-prename descclassname">mindaffectBCI.decoder.UtopiaDataInterface.</code><code class="sig-name descname">testFileProxy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">fs_out</span><span class="o">=</span><span class="default_value">999</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.testFileProxy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.testFileProxy2">
<code class="sig-prename descclassname">mindaffectBCI.decoder.UtopiaDataInterface.</code><code class="sig-name descname">testFileProxy2</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.testFileProxy2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.testPP">
<code class="sig-prename descclassname">mindaffectBCI.decoder.UtopiaDataInterface.</code><code class="sig-name descname">testPP</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.testPP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.testRaw">
<code class="sig-prename descclassname">mindaffectBCI.decoder.UtopiaDataInterface.</code><code class="sig-name descname">testRaw</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.testRaw" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.timestamp_interpolation">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.UtopiaDataInterface.</code><code class="sig-name descname">timestamp_interpolation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sample2timestamp</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_delta</span><span class="o">=</span><span class="default_value">200</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.timestamp_interpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.TransformerMixin</span></code></p>
<p>transform from per-packet time-stamps to per-sample timestamps (with de-jitter)</p>
<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.timestamp_interpolation.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ts</span></em>, <em class="sig-param"><span class="n">nsamp</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.timestamp_interpolation.fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.timestamp_interpolation.testcase">
<code class="sig-name descname">testcase</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">npkt</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">fs</span><span class="o">=</span><span class="default_value">100</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.timestamp_interpolation.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.UtopiaDataInterface.timestamp_interpolation.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">nsamp</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/UtopiaDataInterface.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.UtopiaDataInterface.timestamp_interpolation.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>add per-sample timestamp information to the data matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp</strong> (<em>float</em>) – the timestamp of the last sample of d</p></li>
<li><p><strong>nsamp</strong> (<em>int</em>) – number of samples to interpolate</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(nsamp) the interpolated time-stamps</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.analyse_datasets">
<span id="mindaffectbci-decoder-analyse-datasets-module"></span><h2>mindaffectBCI.decoder.analyse_datasets module<a class="headerlink" href="#module-mindaffectBCI.decoder.analyse_datasets" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.analyse_datasets.analyse_dataset">
<code class="sig-prename descclassname">mindaffectBCI.decoder.analyse_datasets.</code><code class="sig-name descname">analyse_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">Y</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'cca'</span></em>, <em class="sig-param"><span class="n">cv</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">tau_ms</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">300</span></em>, <em class="sig-param"><span class="n">fs</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rank</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">offset_ms</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">center</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/analyse_datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.analyse_datasets.analyse_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>cross-validated training on a single datasets and decoing curve estimation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>np.ndarray</em>) – the X (EEG) sequence</p></li>
<li><p><strong>Y</strong> (<em>np.ndarray</em>) – the Y (stimulus) sequence</p></li>
<li><p><strong>coords</strong> (<em>[</em><em>type</em><em>]</em>) – array of dicts of meta-info describing the structure of X and Y</p></li>
<li><p><strong>fs</strong> (<em>float</em>) – the data sample rate (if coords is not given)</p></li>
<li><p><strong>model</strong> (<em>str</em><em>, </em><em>optional</em>) – The type of model to fit, as in <cite>model_fitting.py</cite>. Defaults to ‘cca’.</p></li>
<li><p><strong>cv</strong> (<em>bool</em><em>, </em><em>optional</em>) – flag if we should train with cross-validation using the cv_fit method. Defaults to True.</p></li>
<li><p><strong>tau_ms</strong> (<em>float</em><em>, </em><em>optional</em>) – length of the stimulus-response in milliseconds. Defaults to 300.</p></li>
<li><p><strong>rank</strong> (<em>int</em><em>, </em><em>optional</em>) – rank of the decomposition in factored models such as cca. Defaults to 1.</p></li>
<li><p><strong>evtlabs</strong> (<em>[</em><em>type</em><em>]</em><em>, </em><em>optional</em>) – The types of events to used to model the brain response, as used in <cite>stim2event.py</cite>. Defaults to None.</p></li>
<li><p><strong>offset_ms</strong> (<em>(</em><em>2</em><em>,</em>) – float, optional): Offset for analysis window from start/end of the event response. Defaults to 0.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>NotImplementedError</strong> – if you as for a model which isn’t implemented</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the cv score for this dataset
dc (tuple): the information about the decoding curve as returned by <cite>decodingCurveSupervised.py</cite>
Fy (np.ndarray): the raw cv’d output-scores for this dataset as returned by <cite>decodingCurveSupervised.py</cite>
clsfr (BaseSequence2Sequence): the trained classifier</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>score (float)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.analyse_datasets.analyse_datasets">
<code class="sig-prename descclassname">mindaffectBCI.decoder.analyse_datasets.</code><code class="sig-name descname">analyse_datasets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'cca'</span></em>, <em class="sig-param"><span class="n">dataset_args</span><span class="p">:</span> <span class="n">dict</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">loader_args</span><span class="p">:</span> <span class="n">dict</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">preprocess_args</span><span class="p">:</span> <span class="n">dict</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">clsfr_args</span><span class="p">:</span> <span class="n">dict</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/analyse_datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.analyse_datasets.analyse_datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>analyse a set of datasets (multiple subject) and generate a summary decoding plot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>[</em><em>str</em><em>]</em>) – the name of the dataset to load</p></li>
<li><p><strong>model</strong> (<em>str</em><em>, </em><em>optional</em>) – The type of model to fit. Defaults to ‘cca’.</p></li>
<li><p><strong>dataset_args</strong> (<em>[</em><em>dict</em><em>]</em><em>, </em><em>optional</em>) – additional arguments for get_dataset. Defaults to None.</p></li>
<li><p><strong>loader_args</strong> (<em>[</em><em>dict</em><em>]</em><em>, </em><em>optional</em>) – additional arguments for the dataset loader. Defaults to None.</p></li>
<li><p><strong>clsfr_args</strong> (<em>[</em><em>dict</em><em>]</em><em>, </em><em>optional</em>) – additional aguments for the model_fitter. Defaults to None.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.analyse_datasets.debug_test_dataset">
<code class="sig-prename descclassname">mindaffectBCI.decoder.analyse_datasets.</code><code class="sig-name descname">debug_test_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">coords</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tau_ms</span><span class="o">=</span><span class="default_value">300</span></em>, <em class="sig-param"><span class="n">fs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">offset_ms</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">'re', 'fe'</span></em>, <em class="sig-param"><span class="n">rank</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">model</span><span class="o">=</span><span class="default_value">'cca'</span></em>, <em class="sig-param"><span class="n">cv</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">preprocess_args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">clsfr_args</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/analyse_datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.analyse_datasets.debug_test_dataset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.analyse_datasets.debug_test_single_dataset">
<code class="sig-prename descclassname">mindaffectBCI.decoder.analyse_datasets.</code><code class="sig-name descname">debug_test_single_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">filename</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dataset_args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">loader_args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/analyse_datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.analyse_datasets.debug_test_single_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>run the debug_test_dataset for a single subject from dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>[</em><em>str</em><em>]</em>) – the dataset to load with get_dataset from <cite>datasets.py</cite></p></li>
<li><p><strong>filename</strong> (<em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – a specific filename regular expression to match to process. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the model fitted during the dataset testing</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>clsfr [BaseSeq2seq]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.analyse_datasets.flatten_decoding_curves">
<code class="sig-prename descclassname">mindaffectBCI.decoder.analyse_datasets.</code><code class="sig-name descname">flatten_decoding_curves</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">decoding_curves</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/analyse_datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.analyse_datasets.flatten_decoding_curves" title="Permalink to this definition">¶</a></dt>
<dd><p>take list of (potentially variable length) decoding curves and make into a single array</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.analyse_datasets.run_analysis">
<code class="sig-prename descclassname">mindaffectBCI.decoder.analyse_datasets.</code><code class="sig-name descname">run_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/analyse_datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.analyse_datasets.run_analysis" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.ccaViewer">
<span id="mindaffectbci-decoder-ccaviewer-module"></span><h2>mindaffectBCI.decoder.ccaViewer module<a class="headerlink" href="#module-mindaffectBCI.decoder.ccaViewer" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.ccaViewer.ccaViewer">
<code class="sig-prename descclassname">mindaffectBCI.decoder.ccaViewer.</code><code class="sig-name descname">ccaViewer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ui</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface" title="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface">mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface</a></span></em>, <em class="sig-param"><span class="n">timeout_ms</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">inf</span></em>, <em class="sig-param"><span class="n">tau_ms</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">500</span></em>, <em class="sig-param"><span class="n">offset_ms</span><span class="o">=</span><span class="default_value">- 15, 0</span></em>, <em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ch_names</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nstimulus_events</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">600</span></em>, <em class="sig-param"><span class="n">rank</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">reg</span><span class="o">=</span><span class="default_value">0.02</span></em>, <em class="sig-param"><span class="n">center</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/ccaViewer.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.ccaViewer.ccaViewer" title="Permalink to this definition">¶</a></dt>
<dd><p>simple sig-viewer using the ring-buffer for testing</p>
</dd></dl>

</div>
<div class="section" id="mindaffectbci-decoder-dataset-debugging-module">
<h2>mindaffectBCI.decoder.dataset debugging module<a class="headerlink" href="#mindaffectbci-decoder-dataset-debugging-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-mindaffectBCI.decoder.datasets">
<span id="mindaffectbci-decoder-datasets-module"></span><h2>mindaffectBCI.decoder.datasets module<a class="headerlink" href="#module-mindaffectBCI.decoder.datasets" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.brains_on_fire_online">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">brains_on_fire_online</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.brains_on_fire_online" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.cocktail">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">cocktail</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.cocktail" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.dataset_generator">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">dataset_generator</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.dataset_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>generator for individual datasets from the given set of datasets</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.get_dataset">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">get_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dsname</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.get_dataset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.lowlands">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">lowlands</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.lowlands" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the directory+filename info for the lowlands noisetagging dataset</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.mTRF_audio">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">mTRF_audio</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.mTRF_audio" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.mark_EMG">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">mark_EMG</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.mark_EMG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.mindaffectBCI">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">mindaffectBCI</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">exptdir</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.mindaffectBCI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.ninapro_db2">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">ninapro_db2</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.ninapro_db2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.openBMI">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">openBMI</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dstype</span><span class="o">=</span><span class="default_value">'SSVEP'</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.openBMI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.p300_prn">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">p300_prn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">label</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.p300_prn" title="Permalink to this definition">¶</a></dt>
<dd><p>generate dataset+filename for p300-prn2</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.plos_one">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">plos_one</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.plos_one" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the directory+filename info for the plos_one noisetagging dataset</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.tactileP3">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">tactileP3</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.tactileP3" title="Permalink to this definition">¶</a></dt>
<dd><p>generate dataset+filename for tactile P3</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.tactile_PatientStudy">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">tactile_PatientStudy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.tactile_PatientStudy" title="Permalink to this definition">¶</a></dt>
<dd><p>generate dataset+filename for p300-prn2</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.test_loader">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">test_loader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">loadfn</span></em>, <em class="sig-param"><span class="n">filenames</span></em>, <em class="sig-param"><span class="n">dataroot</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.test_loader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.testcase">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.testdataset">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">testdataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fn</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.testdataset" title="Permalink to this definition">¶</a></dt>
<dd><p>a conforming toy dataset loader</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.toy">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">toy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.toy" title="Permalink to this definition">¶</a></dt>
<dd><p>make a toy dataset for testing</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.datasets.twofinger">
<code class="sig-prename descclassname">mindaffectBCI.decoder.datasets.</code><code class="sig-name descname">twofinger</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/datasets.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.datasets.twofinger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="mindaffectbci-decoder-dec-test-module">
<h2>mindaffectBCI.decoder.dec_test module<a class="headerlink" href="#mindaffectbci-decoder-dec-test-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-mindaffectBCI.decoder.decoder">
<span id="mindaffectbci-decoder-decoder-module"></span><h2>mindaffectBCI.decoder.decoder module<a class="headerlink" href="#module-mindaffectBCI.decoder.decoder" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.decoder.combine_Ptgt">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decoder.</code><code class="sig-name descname">combine_Ptgt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pvals_objIDs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decoder.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decoder.combine_Ptgt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decoder.dataset_to_XY_ndarrays">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decoder.</code><code class="sig-name descname">dataset_to_XY_ndarrays</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decoder.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decoder.dataset_to_XY_ndarrays" title="Permalink to this definition">¶</a></dt>
<dd><p>convert variable-trial length dataset with stimulus information to fixed size sklearn compatiable (X,Y) nd-arrays</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decoder.doCalibrationSupervised">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decoder.</code><code class="sig-name descname">doCalibrationSupervised</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ui</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface" title="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface">mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface</a></span></em>, <em class="sig-param"><span class="n">clsfr</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence" title="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence">mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence</a></span></em>, <em class="sig-param"><span class="n">cv</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">calfn</span><span class="o">=</span><span class="default_value">'calibration_data.pk'</span></em>, <em class="sig-param"><span class="n">fitfn</span><span class="o">=</span><span class="default_value">'fit_data.pk'</span></em>, <em class="sig-param"><span class="n">previous_dataset</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decoder.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decoder.doCalibrationSupervised" title="Permalink to this definition">¶</a></dt>
<dd><p>do a calibration phase = basically just extract  the training data and train a classifier from the utopiaInterface</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decoder.doPrediction">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decoder.</code><code class="sig-name descname">doPrediction</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clsfr</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence" title="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence">mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence</a></span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">stimulus</span></em>, <em class="sig-param"><span class="n">prev_stimulus</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decoder.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decoder.doPrediction" title="Permalink to this definition">¶</a></dt>
<dd><p>given the current trials data, apply the classifier and decoder to make target predictions</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decoder.doPredictionStatic">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decoder.</code><code class="sig-name descname">doPredictionStatic</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ui</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface" title="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface">mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface</a></span></em>, <em class="sig-param"><span class="n">clsfr</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence" title="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence">mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence</a></span></em>, <em class="sig-param"><span class="n">model_apply_type</span><span class="o">=</span><span class="default_value">'trial'</span></em>, <em class="sig-param"><span class="n">timeout_ms</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">block_step_ms</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">maxDecisLen_ms</span><span class="o">=</span><span class="default_value">8000</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decoder.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decoder.doPredictionStatic" title="Permalink to this definition">¶</a></dt>
<dd><p>do the prediction stage = basically extract data/msgs from trial start and generate a prediction from them</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decoder.getCalibration_dataset">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decoder.</code><code class="sig-name descname">getCalibration_dataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ui</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decoder.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decoder.getCalibration_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>extract a labelled dataset from the utopiaInterface, which are trilas between modechange messages</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decoder.get_trial_start_end">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decoder.</code><code class="sig-name descname">get_trial_start_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msgs</span></em>, <em class="sig-param"><span class="n">start_ts</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decoder.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decoder.get_trial_start_end" title="Permalink to this definition">¶</a></dt>
<dd><p>get the start+end times of the trials in a utopia message stream</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decoder.mainloop">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decoder.</code><code class="sig-name descname">mainloop</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decoder.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decoder.mainloop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decoder.run">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decoder.</code><code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ui</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface" title="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface">mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface</a></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">clsfr</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence" title="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence">mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence</a></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">msg_timeout_ms</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">100</span></em>, <em class="sig-param"><span class="n">host</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">datafile</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tau_ms</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">450</span></em>, <em class="sig-param"><span class="n">offset_ms</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">0</span></em>, <em class="sig-param"><span class="n">out_fs</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">100</span></em>, <em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stopband</span><span class="o">=</span><span class="default_value">45, 65, 5.5, 25, 'bandpass'</span></em>, <em class="sig-param"><span class="n">ftype</span><span class="o">=</span><span class="default_value">'butter'</span></em>, <em class="sig-param"><span class="n">order</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">6</span></em>, <em class="sig-param"><span class="n">cv</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em>, <em class="sig-param"><span class="n">calplots</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">predplots</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">label</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decoder.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decoder.run" title="Permalink to this definition">¶</a></dt>
<dd><p>run the main decoder processing loop</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ui</strong> (<a class="reference internal" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface" title="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface"><em>UtopiaDataInterface</em></a><em>, </em><em>optional</em>) – The utopia data interface class. Defaults to None.</p></li>
<li><p><strong>clsfr</strong> (<a class="reference internal" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence" title="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence"><em>BaseSequence2Sequence</em></a><em>, </em><em>optional</em>) – the classifer to use when model fitting. Defaults to None.</p></li>
<li><p><strong>msg_timeout_ms</strong> (<em>float</em><em>, </em><em>optional</em>) – timeout for getting new messages from the data-interface. Defaults to 100.</p></li>
<li><p><strong>host</strong> (<em>str</em><em>, </em><em>optional</em>) – hostname for the utopia hub. Defaults to None.</p></li>
<li><p><strong>tau_ms</strong> (<em>float</em><em>, </em><em>optional</em>) – length of the stimulus response. Defaults to 400.</p></li>
<li><p><strong>offset_ms</strong> (<em>float</em><em>, </em><em>optiona</em>) – offset in ms to shift the analysis window. Use to compensate for response lag.  Defaults to 0.</p></li>
<li><p><strong>stopband</strong> (<em>tuple</em><em>, </em><em>optional</em>) – temporal filter specification for <cite>UtopiaDataInterface.butterfilt_and_downsample</cite>. Defaults to ((45,65),(5.5,25,’bandpass’))</p></li>
<li><p><strong>ftype</strong> (<em>str</em><em>, </em><em>optional</em>) – type of temporal filter to use.  Defaults to ‘butter’.</p></li>
<li><p><strong>order</strong> (<em>int</em><em>, </em><em>optional</em>) – order of temporal filter to use.  Defaults to 6.</p></li>
<li><p><strong>out_fs</strong> (<em>float</em><em>, </em><em>optional</em>) – sample rate after the pre-processor. Defaults to 100.</p></li>
<li><p><strong>evtlabs</strong> (<em>tuple</em><em>, </em><em>optional</em>) – the brain event coding to use.  Defaults to None.</p></li>
<li><p><strong>calplots</strong> (<em>bool</em><em>, </em><em>optional</em>) – flag if we make plots after calibration. Defaults to False.</p></li>
<li><p><strong>predplots</strong> (<em>bool</em><em>, </em><em>optional</em>) – flag if we make plots after each prediction trial. Defaults to False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decoder.send_prediction">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decoder.</code><code class="sig-name descname">send_prediction</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ui</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface" title="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface">mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface</a></span></em>, <em class="sig-param"><span class="n">Ptgt</span></em>, <em class="sig-param"><span class="n">used_idx</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timestamp</span><span class="o">=</span><span class="default_value">- 1</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decoder.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decoder.send_prediction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decoder.strip_unused">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decoder.</code><code class="sig-name descname">strip_unused</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Y</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decoder.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decoder.strip_unused" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.decodingCurveSupervised">
<span id="mindaffectbci-decoder-decodingcurvesupervised-module"></span><h2>mindaffectBCI.decoder.decodingCurveSupervised module<a class="headerlink" href="#module-mindaffectBCI.decoder.decodingCurveSupervised" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.decodingCurveSupervised.compute_decoding_curve">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decodingCurveSupervised.</code><code class="sig-name descname">compute_decoding_curve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">objIDs</span></em>, <em class="sig-param"><span class="n">integerationLengths</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decodingCurveSupervised.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decodingCurveSupervised.compute_decoding_curve" title="Permalink to this definition">¶</a></dt>
<dd><p>compute the decoding curves from the given epoch+output scores in Fy</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Fy</strong> (<em>[</em><em>np.ndarray</em><em>]</em>) – (nTrl,nEp,nY) per-epoch output scores</p></li>
<li><p><strong>objIDs</strong> (<em>[</em><em>float</em><em>]</em>) – (nY,) the objectIDs for the outputs in Fy</p></li>
<li><p><strong>integerationLengths</strong> (<em>[</em><em>type</em><em>]</em>) – (nInt,) a list of integeration lengths to compute peformance at</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(nTrl,nInt : bool) flag if estimate was correct at this integeration length for this trial
Perr(np.ndarray): (nTrl,nInt : float) compute probability of error for this integeration length and trial
aveProbErr: (nInt: float) average error probablility at this integeration length
aveProbErrEst(np.ndarray): (nInt: float) averaget estimated error probability for this integeration length</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Yerr(np.ndarray)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decodingCurveSupervised.compute_stopping_curve">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decodingCurveSupervised.</code><code class="sig-name descname">compute_stopping_curve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nInt</span></em>, <em class="sig-param"><span class="n">integerationLengths</span></em>, <em class="sig-param"><span class="n">Perr</span></em>, <em class="sig-param"><span class="n">Yerr</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decodingCurveSupervised.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decodingCurveSupervised.compute_stopping_curve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decodingCurveSupervised.decodingCurveSupervised">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decodingCurveSupervised.</code><code class="sig-name descname">decodingCurveSupervised</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">objIDs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nInt</span><span class="o">=</span><span class="default_value">30, 25</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decodingCurveSupervised.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decodingCurveSupervised.decodingCurveSupervised" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a decoding curve, i.e. mistake-probability over time for probability based stopping from the per-epoch output scores</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>=</strong> (<em>nInt</em>) – N.B. Supervised decoder only has 1 model!!!</p></li>
<li><p><strong>=</strong> – N.B. if objIDs &gt; size(Fy,2), then additional virtual outputs are added</p></li>
<li><p><strong>=</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>integerationLengths - [nInt] the actual integeration lengths in samples
ProbErr: (nInt,)float empherical error probablility at this integeration length
ProbErrEst(np.ndarray): (nInt: float) decoder estimate of the error rate for each integeration length
StopPerr - (nInt,) error rate at this average trial length when using ProbErrEst-thresholding based stopping
StopThresh - (nInt,) ProbErrEst threshold used to get this average trial length.
Yerr(np.ndarray): (nTrl,nInt : bool) flag if estimate was correct at this integeration length for this trial
Perr(np.ndarray): (nTrl,nInt : float) compute probability of error for this integeration length and trial</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decodingCurveSupervised.plot_decoding_curve">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decodingCurveSupervised.</code><code class="sig-name descname">plot_decoding_curve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">integerationLengths</span></em>, <em class="sig-param"><span class="n">aveProbErr</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decodingCurveSupervised.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decodingCurveSupervised.plot_decoding_curve" title="Permalink to this definition">¶</a></dt>
<dd><p>plot the decoding curve</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decodingCurveSupervised.print_decoding_curve">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decodingCurveSupervised.</code><code class="sig-name descname">print_decoding_curve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">integerationLengths</span></em>, <em class="sig-param"><span class="n">aveProbErr</span></em>, <em class="sig-param"><span class="n">aveProbErrEst</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stopYerr</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stopPerrThresh</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decodingCurveSupervised.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decodingCurveSupervised.print_decoding_curve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decodingCurveSupervised.testcase">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decodingCurveSupervised.</code><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decodingCurveSupervised.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decodingCurveSupervised.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.decodingSupervised">
<span id="mindaffectbci-decoder-decodingsupervised-module"></span><h2>mindaffectBCI.decoder.decodingSupervised module<a class="headerlink" href="#module-mindaffectBCI.decoder.decodingSupervised" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.decodingSupervised.decodingSupervised">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decodingSupervised.</code><code class="sig-name descname">decodingSupervised</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">softmaxscale</span><span class="o">=</span><span class="default_value">3.5</span></em>, <em class="sig-param"><span class="n">badFyThresh</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">centFy</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">detrendFy</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">nEpochCorrection</span><span class="o">=</span><span class="default_value">30</span></em>, <em class="sig-param"><span class="n">minDecisLen</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">maxDecisLen</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">bwdAccumulate</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">marginalizemodels</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">nocontrolamplitude</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">priorsigma</span><span class="o">=</span><span class="default_value">- 1, 120</span></em>, <em class="sig-param"><span class="n">tiebreaking_noise</span><span class="o">=</span><span class="default_value">1e-08</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decodingSupervised.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decodingSupervised.decodingSupervised" title="Permalink to this definition">¶</a></dt>
<dd><p>true-target estimator and error-probility estimator for each trial
Inputs:</p>
<blockquote>
<div><p>Fy   - (nModel,nTrl,nEp,nY) [#Y x #Epoch x #Trials x nModels]
softmaxscale - the scale length to pass to zscore2Ptgt_softmax.py
badFyThresh - threshold for detction of bad Fy entry, in std-dev
centFy   - bool, do we center Fy before computing  <em>important</em>  (true)
nEpochCorrection - int, number of epochs to use a base for correction of number epochs in the sum.</p>
<blockquote>
<div><p>such that: zscore = Fy / ( sigma * ( 1+1/(nEpoch/nEpochErrorCorrection)) ),
basically, nEpoch &lt; nEpochCorrection have highly increased Perr, so unlikely to be selected</p>
</div></blockquote>
<dl>
<dt>minDecisLen - int, number of epochs to use as base for distribution of time-based decision points.</dt><dd><blockquote>
<div><p>i.e. decisions at, [1,2,4,…2^n]*exptDistDecis</p>
</div></blockquote>
<p>OR: minDecisLen&lt;0 =&gt; decision point every abs(minDeicsLen) epochs</p>
</dd>
</dl>
<p>bwdAccumulate - [bool], accumulate data backwards from last epoch gathered
maxDecisLen   - maximum number of epochs for a decision
priorsigma = (sigma,N) prior estimate of sigma2 and number pseudo-points (10,30)</p>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>Yest - (nTrl,nDecis) [ nDecis x nTrl ] the most likely / minimum error output for each decision point
Perr - (nTrl,nDecis) [ nDecix x nTrl ] the probability that this selection is an ERROR for each decision point
Ptgt - (nTrl,nDecis,nY) [ nY x nDecis x nTrl ] the probability each target is the true target for each decision point</p>
</dd>
</dl>
<p>Copyright (c) MindAffect B.V. 2018</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decodingSupervised.decodingSupervised_streamed">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decodingSupervised.</code><code class="sig-name descname">decodingSupervised_streamed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">softmaxscale</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">nocontrolamplitude</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">badFyThresh</span><span class="o">=</span><span class="default_value">6</span></em>, <em class="sig-param"><span class="n">centFy</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">nEpochCorrection</span><span class="o">=</span><span class="default_value">15</span></em>, <em class="sig-param"><span class="n">minDecisLen</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">maxDecisLen</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">bwdAccumulate</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">filtLen</span><span class="o">=</span><span class="default_value">15</span></em>, <em class="sig-param"><span class="n">marginalizemodels</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decodingSupervised.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decodingSupervised.decodingSupervised_streamed" title="Permalink to this definition">¶</a></dt>
<dd><p>true-target estimator and error-probility estimator for each trial
Inputs:</p>
<blockquote>
<div><p>Fy   - (nModel,nTrl,nEp,nY) [#Y x #Epoch x #Trials x nModels]
softmaxscale - the scale length to pass to zscore2Ptgt_softmax.py
badFyThresh - threshold for detction of bad Fy entry, in std-dev
centFy   - bool, do we center Fy before computing  <em>important</em>  (true)
nEpochCorrection - int, number of epochs to use a base for correction of number epochs in the sum.</p>
<blockquote>
<div><p>such that: zscore = Fy / ( sigma * ( 1+1/(nEpoch/nEpochErrorCorrection)) ),
basically, nEpoch &lt; nEpochCorrection have highly increased Perr, so unlikely to be selected</p>
</div></blockquote>
<dl>
<dt>minDecisLen - int, number of epochs to use as base for distribution of time-based decision points.</dt><dd><blockquote>
<div><p>i.e. decisions at, [1,2,4,…2^n]*exptDistDecis</p>
</div></blockquote>
<p>OR: minDecisLen&lt;0 =&gt; decision point every abs(minDeicsLen) epochs</p>
</dd>
</dl>
<p>bwdAccumulate - [bool], accumulate data backwards from last epoch gathered
maxDecisLen   - maximum number of epochs for a decision</p>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>Yest - (nTrl,nDecis) [ nDecis x nTrl ] the most likely / minimum error output for each decision point
Perr - (nTrl,nDecis) [ nDecix x nTrl ] the probability that this selection is an ERROR for each decision point
Ptgt - (nTrl,nDecis,nY) [ nY x nDecis x nTrl ] the probability each target is the true target for each decision point</p>
</dd>
</dl>
<p>Copyright (c) MindAffect B.V. 2018</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.decodingSupervised.testcase">
<code class="sig-prename descclassname">mindaffectBCI.decoder.decodingSupervised.</code><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/decodingSupervised.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.decodingSupervised.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.devent2stimsequence">
<span id="mindaffectbci-decoder-devent2stimsequence-module"></span><h2>mindaffectBCI.decoder.devent2stimsequence module<a class="headerlink" href="#module-mindaffectBCI.decoder.devent2stimsequence" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.devent2stimsequence.devent2stimSequence">
<code class="sig-prename descclassname">mindaffectBCI.decoder.devent2stimsequence.</code><code class="sig-name descname">devent2stimSequence</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">devents</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/devent2stimsequence.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.devent2stimsequence.devent2stimSequence" title="Permalink to this definition">¶</a></dt>
<dd><p>convert a set of STIMULUSEVENT messages into a stimulus-sequence array with stimulus-times as expected by the utopia RECOGNISER</p>
<dl class="simple">
<dt>Inputs:</dt><dd><dl class="simple">
<dt>devents - [nEvt]:UtopiaMessage list of UtopiaMessage messages</dt><dd><dl class="simple">
<dt>i.e. a decoded utopia STIMULUSEVENT message, should be of type</dt><dd><p>{ msgID:’E’byte, timeStamp:int, objIDs:(nObj:byte), objState:(nObj:byte) }</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>Outputs:</dt><dd><p>Me     - (nEvt,nY :int) The extract stimulus sequence
objIDs - (nY :byte) The set of used object IDs
stimTimes_ms - (nEvt :int) The timestamp of each event in milliseconds
isistimEvent - (nEp :bool) Indicator which input events are stimulus events</p>
</dd>
</dl>
<p>Copyright (c) MindAffect B.V. 2018</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.devent2stimsequence.upsample_stimseq">
<code class="sig-prename descclassname">mindaffectBCI.decoder.devent2stimsequence.</code><code class="sig-name descname">upsample_stimseq</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sample_ts</span></em>, <em class="sig-param"><span class="n">ss</span></em>, <em class="sig-param"><span class="n">stimulus_ts</span></em>, <em class="sig-param"><span class="n">objIDs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">usedobjIDs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">trlen</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/devent2stimsequence.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.devent2stimsequence.upsample_stimseq" title="Permalink to this definition">¶</a></dt>
<dd><p>upsample a set of timestamped stimulus states to a sample rate
WARNING: assumes sample_ts and stimulus_ts are in <em>ascending</em> sorted order!</p>
</dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.erpViewer">
<span id="mindaffectbci-decoder-erpviewer-module"></span><h2>mindaffectBCI.decoder.erpViewer module<a class="headerlink" href="#module-mindaffectBCI.decoder.erpViewer" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.erpViewer.erpViewer">
<code class="sig-prename descclassname">mindaffectBCI.decoder.erpViewer.</code><code class="sig-name descname">erpViewer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ui</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface" title="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface">mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface</a></span></em>, <em class="sig-param"><span class="n">timeout_ms</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">inf</span></em>, <em class="sig-param"><span class="n">tau_ms</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">500</span></em>, <em class="sig-param"><span class="n">offset_ms</span><span class="o">=</span><span class="default_value">- 15, 0</span></em>, <em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ch_names</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nstimulus_events</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">600</span></em>, <em class="sig-param"><span class="n">rank</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">center</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/erpViewer.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.erpViewer.erpViewer" title="Permalink to this definition">¶</a></dt>
<dd><p>simple sig-viewer using the ring-buffer for testing</p>
</dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.lower_bound_tracker">
<span id="mindaffectbci-decoder-lower-bound-tracker-module"></span><h2>mindaffectBCI.decoder.lower_bound_tracker module<a class="headerlink" href="#module-mindaffectBCI.decoder.lower_bound_tracker" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.lower_bound_tracker.</code><code class="sig-name descname">lower_bound_tracker</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">window_size</span><span class="o">=</span><span class="default_value">200</span></em>, <em class="sig-param"><span class="n">C</span><span class="o">=</span><span class="default_value">0.01, None</span></em>, <em class="sig-param"><span class="n">outlier_thresh</span><span class="o">=</span><span class="default_value">1, None</span></em>, <em class="sig-param"><span class="n">step_size</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">step_threshold</span><span class="o">=</span><span class="default_value">1.5</span></em>, <em class="sig-param"><span class="n">a0</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">b0</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">warmup_size</span><span class="o">=</span><span class="default_value">10</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/lower_bound_tracker.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>sliding window linear trend tracker</p>
<dl class="py method">
<dt id="mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.append">
<code class="sig-name descname">append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/lower_bound_tracker.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.append" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/lower_bound_tracker.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.getX">
<code class="sig-name descname">getX</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/lower_bound_tracker.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.getX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.getY">
<code class="sig-name descname">getY</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/lower_bound_tracker.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.getY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keep_model</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/lower_bound_tracker.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.reset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.testcase">
<em class="property">static </em><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">savefile</span><span class="o">=</span><span class="default_value">'-'</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/lower_bound_tracker.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/lower_bound_tracker.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.transform" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/lower_bound_tracker.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.lower_bound_tracker.lower_bound_tracker.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.model_fitting">
<span id="mindaffectbci-decoder-model-fitting-module"></span><h2>mindaffectBCI.decoder.model_fitting module<a class="headerlink" href="#module-mindaffectBCI.decoder.model_fitting" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.model_fitting.</code><code class="sig-name descname">BaseSequence2Sequence</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">'re', 'fe'</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">18</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">outputscore</span><span class="o">=</span><span class="default_value">'ip'</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.BaseEstimator</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.ClassifierMixin</span></code></p>
<p>Base class for sequence-to-sequence learning.  Provides, prediction and scoring functions, but not the fitting method</p>
<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.audc_score">
<em class="property">static </em><code class="sig-name descname">audc_score</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.audc_score" title="Permalink to this definition">¶</a></dt>
<dd><p>compute area under decoding curve score from Fy, <em>assuming</em> Fy[:,:,0] is the <em>true</em> classes score</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.cv_fit">
<code class="sig-name descname">cv_fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">cv</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">fit_params</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">return_estimator</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">calibrate_softmax</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">dedup0</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.cv_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>cross validated fit to the data.  N.B. write our own as sklearn doesn’t work for getting the estimator values for structured output.</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.decode_proba">
<code class="sig-name descname">decode_proba</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">minDecisLen</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">marginalizemodels</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.decode_proba" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>fit model mapping 2 multi-dim time series: X = (tr, samp, d), Y = (tr, samp, e)</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.is_fitted">
<code class="sig-name descname">is_fitted</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.is_fitted" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.plot_model">
<code class="sig-name descname">plot_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.plot_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.predict">
<code class="sig-name descname">predict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">dedup0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">prevY</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>make predictions on multi-dim time series: X = (tr, samp, d), Y = (tr, samp, e)</p>
<p>N.B. this implementation assumes linear coefficients in <a href="#id1"><span class="problematic" id="id2">W_</span></a> (nM,nfilt,d) and <a href="#id3"><span class="problematic" id="id4">R_</span></a> (nM,nfilt,nE,tau)</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.predict_proba">
<code class="sig-name descname">predict_proba</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">marginalizemodels</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">minDecisLen</span><span class="o">=</span><span class="default_value">- 1</span></em>, <em class="sig-param"><span class="n">dedup0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">prevY</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.predict_proba" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.score">
<code class="sig-name descname">score</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.score" title="Permalink to this definition">¶</a></dt>
<dd><p>score this model on this data, N.B. for model_selection higher is <em>better</em></p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.stim2event">
<code class="sig-name descname">stim2event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">prevY</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.stim2event" title="Permalink to this definition">¶</a></dt>
<dd><p>transform Stimulus-encoded to brain-encoded, if needed</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>estimate the stimulus properties from the raw data</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mindaffectBCI.decoder.model_fitting.BwdLinearRegression">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.model_fitting.</code><code class="sig-name descname">BwdLinearRegression</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">'re', 'fe'</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">18</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">reg</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rcond</span><span class="o">=</span><span class="default_value">1e-05</span></em>, <em class="sig-param"><span class="n">badEpThresh</span><span class="o">=</span><span class="default_value">6</span></em>, <em class="sig-param"><span class="n">center</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BwdLinearRegression" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence" title="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence</span></code></a></p>
<p>Sequence 2 Sequence learning using backward linear regression  W*X = Y</p>
<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.BwdLinearRegression.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.BwdLinearRegression.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>fit 2 multi-dim time series: X = (tr, samp, d), Y = (tr, samp, e)</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mindaffectBCI.decoder.model_fitting.FwdLinearRegression">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.model_fitting.</code><code class="sig-name descname">FwdLinearRegression</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">'re', 'fe'</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">18</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">reg</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rcond</span><span class="o">=</span><span class="default_value">1e-06</span></em>, <em class="sig-param"><span class="n">badEpThresh</span><span class="o">=</span><span class="default_value">6</span></em>, <em class="sig-param"><span class="n">center</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.FwdLinearRegression" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence" title="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence</span></code></a></p>
<p>Sequence 2 Sequence learning using forward linear regression  X = A*Y</p>
<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.FwdLinearRegression.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.FwdLinearRegression.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>fit 2 multi-dim time series: X = (tr, samp, d), Y = (tr, samp, e)</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mindaffectBCI.decoder.model_fitting.LinearSklearn">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.model_fitting.</code><code class="sig-name descname">LinearSklearn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">clsfr</span></em>, <em class="sig-param"><span class="n">labelizeY</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ignore_unlabelled</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">badEpThresh</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.LinearSklearn" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence" title="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence</span></code></a></p>
<p>Wrap a normal sk-learn classifier for sequence to sequence learning</p>
<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.LinearSklearn.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.LinearSklearn.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>fit model mapping 2 multi-dim time series: X = (tr, samp, d), Y = (tr, samp, e)</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.LinearSklearn.sklearn_fit">
<em class="property">static </em><code class="sig-name descname">sklearn_fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">clsfr</span></em>, <em class="sig-param"><span class="n">tau</span></em>, <em class="sig-param"><span class="n">offset</span></em>, <em class="sig-param"><span class="n">labelizeY</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ignore_unlabelled</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">badEpThresh</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verb</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.LinearSklearn.sklearn_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>fit 2 multi-dim time series: X = (tr, samp, d), Y = (tr, samp, e) using a given sklearn linear_model method</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mindaffectBCI.decoder.model_fitting.MultiCCA">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.model_fitting.</code><code class="sig-name descname">MultiCCA</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">'re', 'fe'</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">18</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">rank</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">reg</span><span class="o">=</span><span class="default_value">1e-08</span></em>, <em class="sig-param"><span class="n">rcond</span><span class="o">=</span><span class="default_value">0.0001</span></em>, <em class="sig-param"><span class="n">badEpThresh</span><span class="o">=</span><span class="default_value">6</span></em>, <em class="sig-param"><span class="n">symetric</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">center</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">CCA</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.MultiCCA" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence" title="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence</span></code></a></p>
<p>Sequence 2 Sequence learning using CCA as a bi-directional forward/backward learning method</p>
<dl class="py method">
<dt id="mindaffectBCI.decoder.model_fitting.MultiCCA.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">stimTimes</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.MultiCCA.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>fit 2 multi-dim time series: X = (tr, samp, d), Y = (tr, samp, Y)</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.model_fitting.plot_model_weights">
<code class="sig-prename descclassname">mindaffectBCI.decoder.model_fitting.</code><code class="sig-name descname">plot_model_weights</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence" title="mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence">mindaffectBCI.decoder.model_fitting.BaseSequence2Sequence</a></span></em>, <em class="sig-param"><span class="n">ch_names</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.plot_model_weights" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.model_fitting.testLeadLag">
<code class="sig-prename descclassname">mindaffectBCI.decoder.model_fitting.</code><code class="sig-name descname">testLeadLag</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.testLeadLag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.model_fitting.testcase">
<code class="sig-prename descclassname">mindaffectBCI.decoder.model_fitting.</code><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span><span class="o">=</span><span class="default_value">'toy'</span></em>, <em class="sig-param"><span class="n">loader_args</span><span class="o">=</span><span class="default_value">{}</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.model_fitting.visualize_Fy_Py">
<code class="sig-prename descclassname">mindaffectBCI.decoder.model_fitting.</code><code class="sig-name descname">visualize_Fy_Py</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">Py</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/model_fitting.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.model_fitting.visualize_Fy_Py" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.multipleCCA">
<span id="mindaffectbci-decoder-multiplecca-module"></span><h2>mindaffectBCI.decoder.multipleCCA module<a class="headerlink" href="#module-mindaffectBCI.decoder.multipleCCA" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.multipleCCA.cvSupervised">
<code class="sig-prename descclassname">mindaffectBCI.decoder.multipleCCA.</code><code class="sig-name descname">cvSupervised</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Xe</span></em>, <em class="sig-param"><span class="n">Me</span></em>, <em class="sig-param"><span class="n">stimTimes</span></em>, <em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">'re', 'fe'</span></em>, <em class="sig-param"><span class="n">n_splits</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">rank</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/multipleCCA.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.multipleCCA.cvSupervised" title="Permalink to this definition">¶</a></dt>
<dd><p>do a cross-validated training of a multicca model using sklearn</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.multipleCCA.multipleCCA">
<code class="sig-prename descclassname">mindaffectBCI.decoder.multipleCCA.</code><code class="sig-name descname">multipleCCA</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Cxx</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">Cxy</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">Cyy</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reg</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">rank</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">CCA</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">rcond</span><span class="o">=</span><span class="default_value">0.0001</span></em>, <em class="sig-param"><span class="n">symetric</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/multipleCCA.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.multipleCCA.multipleCCA" title="Permalink to this definition">¶</a></dt>
<dd><dl>
<dt>Compute multiple CCA decompositions using the given summary statistics</dt><dd><p>[J,W,R]=multiCCA(Cxx,Cxy,Cyy,regx,regy,rank,CCA)</p>
</dd>
<dt>Inputs:</dt><dd><p>Cxx  = (d,d) current data covariance
Cxy  = (nM,nE,tau,d) current per output ERPs
Cyy  = (nM,nE,tau,nE,tau) current response covariance for each output
reg  = (1,) :float or (2,):float linear weighting reg strength or separate values for Cxx and Cyy</p>
<blockquote>
<div><p>OR (d,) regularisation ridge coefficients for Cxx  (0)</p>
</div></blockquote>
<p>rank= [1x1] number of top cca components to return (1)
CCA = [bool] or (2,):bool  flag if we normalize the spatial dimension. (true)
rcond  = [float] tolerance for singular eigenvalues.        (1e-4)</p>
<blockquote>
<div><p>or [2x1] separate rcond for Cxx (rcond(1)) and Cyy (rcond(2))
or [2x1] (-1&lt;-0) negative values = keep this fraction of eigen-values
or (2,1) &lt;-1 keep this many eigenvalues</p>
</div></blockquote>
<p>symetric = [bool] us symetric whitener?</p>
</dd>
<dt>Outputs:</dt><dd><p>J     = (nM,) optimisation objective scores
W     = (nM,rank,d) spatial filters for each output
R     = (nM,rank,nE,tau) responses for each stimulus event for each output</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p># Supervised CCA
Y = (nEp/nSamp,nY,nE) indicator for each event-type and output of it’s type in each epoch
X = (nEp/nSamp,tau,d) sliced pre-processed raw data into per-stimulus event responses
stimTimes = (nEp) # sample number for each epoch or None if sample rate
Cxx,Cxy,Cyy=updateSummaryStatistics(X, Y, stimTimes)
J,w, r=multiCCA(Cxx, Cxy, Cyy, reg) # w=(nM,d)[dx1],r=(nM,nE,tau)[tau x nE] are the found spatial,spectral filters
# incremental zeroTrain
Cxx=[];Cxy=[];Cyy=[]; prediction=[];
while isCalibration:</p>
<blockquote>
<div><p># Slicing
newX,newE,stimTimes= preprocessnSliceTrial(); #function which get 1 trials data+stim
# Model Fitting
Cxx, Cxy, Cyy= updateSummaryStatistics(newX, newE, stimTimes, Cxx, Cxy, Cyy);
J, w, r      = multipleCCA(Cxx, Cxy, Cyy, regx, regy) # w=[dx1],r=[tau x nE] are the found spatial,spectral filters</p>
</div></blockquote>
<p>end
# re-compute with current state, can try different regulisors, e.g. for adaptive bad-ch
regx = updateRegFromBadCh();
J, w, r=multipleCCA(Cxx, Cxy, Cyy, reg)</p>
<p>Copyright (c) MindAffect B.V. 2018</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.multipleCCA.plot_multicca_solution">
<code class="sig-prename descclassname">mindaffectBCI.decoder.multipleCCA.</code><code class="sig-name descname">plot_multicca_solution</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">w</span></em>, <em class="sig-param"><span class="n">r</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/multipleCCA.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.multipleCCA.plot_multicca_solution" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.multipleCCA.robust_whitener">
<code class="sig-prename descclassname">mindaffectBCI.decoder.multipleCCA.</code><code class="sig-name descname">robust_whitener</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">C</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">reg</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">0</span></em>, <em class="sig-param"><span class="n">rcond</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">1e-06</span></em>, <em class="sig-param"><span class="n">symetric</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">verb</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/multipleCCA.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.multipleCCA.robust_whitener" title="Permalink to this definition">¶</a></dt>
<dd><p>compute a robust whitener for the input covariance matrix C, s.t. isqrtC*C*isqrtC.T = I
:param C: Sample covariance matrix of the data
:type C: (d,d) np.ndarray
:param reg: regularization strength when computing the whitener. Defaults to 0.
:type reg: float, optional
:param rcond: reverse-condition number for truncating degenerate eigen-values when computing the inverse. Defaults to 1e-6.
:type rcond: float, optional
:param symetric: flag to produce a symetric-whitener (which preserves location) or not. Defaults to True.
:type symetric: bool, optional
:param verb: verbosity level. Defaults to 0.
:type verb: int, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The whitening matrix
iW (np.ndarray): The inverse whitening matrix</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>W (np.ndarray)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.multipleCCA.testcase">
<code class="sig-prename descclassname">mindaffectBCI.decoder.multipleCCA.</code><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/multipleCCA.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.multipleCCA.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.multipleCCA.testcase_matlab_summarystatistics">
<code class="sig-prename descclassname">mindaffectBCI.decoder.multipleCCA.</code><code class="sig-name descname">testcase_matlab_summarystatistics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/multipleCCA.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.multipleCCA.testcase_matlab_summarystatistics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.multipleMCCA">
<span id="mindaffectbci-decoder-multiplemcca-module"></span><h2>mindaffectBCI.decoder.multipleMCCA module<a class="headerlink" href="#module-mindaffectBCI.decoder.multipleMCCA" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.multipleMCCA.cvSupervised">
<code class="sig-prename descclassname">mindaffectBCI.decoder.multipleMCCA.</code><code class="sig-name descname">cvSupervised</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Xe</span></em>, <em class="sig-param"><span class="n">Me</span></em>, <em class="sig-param"><span class="n">stimTimes</span></em>, <em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">'re', 'fe'</span></em>, <em class="sig-param"><span class="n">n_splits</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">rank</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/multipleMCCA.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.multipleMCCA.cvSupervised" title="Permalink to this definition">¶</a></dt>
<dd><p>do a cross-validated training of a multicca model using sklearn</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.multipleMCCA.multipleCCA">
<code class="sig-prename descclassname">mindaffectBCI.decoder.multipleMCCA.</code><code class="sig-name descname">multipleCCA</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Cxx</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">Cxy</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">Cyy</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reg</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">regy</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">rank</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">CCA</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">rcond</span><span class="o">=</span><span class="default_value">1e-06</span></em>, <em class="sig-param"><span class="n">symetric</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/multipleMCCA.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.multipleMCCA.multipleCCA" title="Permalink to this definition">¶</a></dt>
<dd><dl>
<dt>Compute multiple multi-way CCA (MCCA) decompositions using the given summary statistics</dt><dd><p>[J,W,R]=multiCCA(Cxx,Cxy,Cyy,regx,regy,rank,CCA)</p>
</dd>
<dt>Inputs:</dt><dd><p>Cxx  = (d,d) current data cross-covariance (or any n-way symetric covariance matrix)
Cxy  = (nM,nE,tau,d) current per output ERPs
Cyy  = (nM,nE,tau,nE,tau) current response covariance for each output
reg  = (1,) :float or (2,):float linear weighting reg strength or separate values for Cxx and Cyy</p>
<blockquote>
<div><p>OR (d,) regularisation ridge coefficients for Cxx  (0)</p>
</div></blockquote>
<p>rank= [1x1] number of top cca components to return (1)
CCA = [bool] or (2,):bool  flag if we normalize the X component, or the Y component. (true)
rcond  = [float] tolerance for singular eigenvalues.        (1e-4)</p>
<blockquote>
<div><p>or (2,) separate rcond for Cxx (rcond(1)) and Cyy (rcond(2))
or (2,1) (-1&lt;-0) negative values = keep this fraction of eigen-values
or (2,1) &lt;-1 keep this many eigenvalues</p>
</div></blockquote>
<p>symetric = [bool] us symetric whitener?</p>
</dd>
<dt>Outputs:</dt><dd><p>J     = [nY x 1] optimisation objective scores
W     = [d x rank x nY] spatial filters for each output
R     = [tau x nE x rank x nY] responses for each stimulus event for each output</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p># Supervised CCA
Y = (nEp/nSamp,nY,nE) indicator for each event-type and output of it’s type in each epoch
X = (nEp/nSamp,tau,d) sliced pre-processed raw data into per-stimulus event responses
stimTimes = (nEp) # sample number for each epoch or None if sample rate
Cxx,Cxy,Cyy=updateSummaryStatistics(X, Y, stimTimes)
J,w, r=multiCCA(Cxx, Cxy, Cyy, reg) # w=(nM,d)[dx1],r=(nM,nE,tau)[tau x nE] are the found spatial,spectral filters
# incremental zeroTrain
Cxx=[];Cxy=[];Cyy=[]; prediction=[];
while isCalibration:</p>
<blockquote>
<div><p># Slicing
newX,newE,stimTimes= preprocessnSliceTrial(); #function which get 1 trials data+stim
# Model Fitting
Cxx, Cxy, Cyy= updateSummaryStatistics(newX, newE, stimTimes, Cxx, Cxy, Cyy);
J, w, r      = multipleCCA(Cxx, Cxy, Cyy, regx, regy) # w=[dx1],r=[tau x nE] are the found spatial,spectral filters</p>
</div></blockquote>
<p>end
# re-compute with current state, can try different regulisors, e.g. for adaptive bad-ch
regx = updateRegFromBadCh();
J, w, r=multipleCCA(Cxx, Cxy, Cyy, reg)</p>
<p>Copyright (c) MindAffect B.V. 2018</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.multipleMCCA.plot_multicca_solution">
<code class="sig-prename descclassname">mindaffectBCI.decoder.multipleMCCA.</code><code class="sig-name descname">plot_multicca_solution</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">w</span></em>, <em class="sig-param"><span class="n">r</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/multipleMCCA.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.multipleMCCA.plot_multicca_solution" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.multipleMCCA.robust_whitener">
<code class="sig-prename descclassname">mindaffectBCI.decoder.multipleMCCA.</code><code class="sig-name descname">robust_whitener</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">C</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">reg</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">0</span></em>, <em class="sig-param"><span class="n">rcond</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">1e-06</span></em>, <em class="sig-param"><span class="n">symetric</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">verb</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/multipleMCCA.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.multipleMCCA.robust_whitener" title="Permalink to this definition">¶</a></dt>
<dd><p>compute a robust whitener for the input covariance matrix C, s.t. isqrtC*C*isqrtC.T = I
:param C: Sample covariance matrix of the data
:type C: (d,d) np.ndarray
:param reg: regularization strength when computing the whitener. Defaults to 0.
:type reg: float, optional
:param rcond: reverse-condition number for truncating degenerate eigen-values when computing the inverse. Defaults to 1e-6.
:type rcond: float, optional
:param symetric: flag to produce a symetric-whitener (which preserves location) or not. Defaults to True.
:type symetric: bool, optional
:param verb: verbosity level. Defaults to 0.
:type verb: int, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The whitening matrix
iW (np.ndarray): The inverse whitening matrix</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>W (np.ndarray)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.multipleMCCA.testcase">
<code class="sig-prename descclassname">mindaffectBCI.decoder.multipleMCCA.</code><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/multipleMCCA.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.multipleMCCA.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.normalizeOutputScores">
<span id="mindaffectbci-decoder-normalizeoutputscores-module"></span><h2>mindaffectBCI.decoder.normalizeOutputScores module<a class="headerlink" href="#module-mindaffectBCI.decoder.normalizeOutputScores" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores.c4">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores.</code><code class="sig-name descname">c4</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores.c4" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores.estimate_Fy_noise_variance">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores.</code><code class="sig-name descname">estimate_Fy_noise_variance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">decisIdx</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">centFy</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">detrendFy</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">priorsigma</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verb</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores.estimate_Fy_noise_variance" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the noise variance for Fy</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Fy</strong> (<em>[</em><em>np.ndarray</em><em>]</em>) – (nTr,nEp,nY) the output scores</p></li>
<li><p><strong>decisIdx</strong> (<em>[</em><em>type</em><em>]</em><em>, </em><em>optional</em>) – [description]. Defaults to None.</p></li>
<li><p><strong>centFy</strong> (<em>bool</em><em>, </em><em>optional</em>) – flag if we should center over outputs before computing variance. Defaults to True.</p></li>
<li><p><strong>detrendFy</strong> (<em>bool</em><em>, </em><em>optional</em>) – flag if we should detrend Fy before computing it’s variance. Defaults to True.</p></li>
<li><p><strong>priorsigma</strong> (<em>[</em><em>type</em><em>]</em><em>, </em><em>optional</em>) – Prior estimate for the variance. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(nTr, nDecis) estimated variance per sample at each decision point</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>sigma2 ([np.ndarray])</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores.estimate_Fy_noise_variance_2">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores.</code><code class="sig-name descname">estimate_Fy_noise_variance_2</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">decisIdx</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">centFy</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">detrendFy</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">priorsigma</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verb</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores.estimate_Fy_noise_variance_2" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the noise variance for Fy</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Fy</strong> (<em>[</em><em>np.ndarray</em><em>]</em>) – (nTr,nEp,nY) the output scores</p></li>
<li><p><strong>decisIdx</strong> (<em>[</em><em>type</em><em>]</em><em>, </em><em>optional</em>) – [description]. Defaults to None.</p></li>
<li><p><strong>centFy</strong> (<em>bool</em><em>, </em><em>optional</em>) – flag if we should center over outputs before computing variance. Defaults to True.</p></li>
<li><p><strong>detrendFy</strong> (<em>bool</em><em>, </em><em>optional</em>) – flag if we should detrend Fy before computing it’s variance. Defaults to True.</p></li>
<li><p><strong>priorsigma</strong> (<em>[</em><em>type</em><em>]</em><em>, </em><em>optional</em>) – Prior estimate for the variance. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(nTr, nDecis) estimated variance per sample at each decision point</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>sigma2 ([np.ndarray])</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores.filter_Fy">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores.</code><code class="sig-name descname">filter_Fy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">filtLen</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">B</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores.filter_Fy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores.get_valid_epochs_outputs">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores.</code><code class="sig-name descname">get_valid_epochs_outputs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">validTgt</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores.get_valid_epochs_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>get the number valid epoch and outputs from a zero-padded Fy set</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Fy</strong> (<em>[</em><em>np.ndarray</em><em>]</em>) – (nTrl,nEp,nY) the output scores</p></li>
<li><p><strong>validTgt</strong> (<em>[</em><em>np.ndarray</em><em>]</em>) – (nTrl,nY) flag if this output is used in this trial</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(nTrl,) number valid outputs per trial
nEp ([np.ndarray]): (nTrl,) number valid epochs per trial
validTgt ([np.ndarray]): (nTrl,nY) flag if this output is used in this trial</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>nY ([np.ndarray])</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores.mktestFy">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores.</code><code class="sig-name descname">mktestFy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nY</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">nM</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">nEp</span><span class="o">=</span><span class="default_value">360</span></em>, <em class="sig-param"><span class="n">nTrl</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">sigstr</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">startupNoisefrac</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">offsetstr</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">trlenfrac</span><span class="o">=</span><span class="default_value">0.25</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores.mktestFy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores.normalizeOutputScores">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores.</code><code class="sig-name descname">normalizeOutputScores</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">validTgt</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">badFyThresh</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">centFy</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">detrendFy</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">nEpochCorrection</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">minDecisLen</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">maxDecisLen</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">bwdAccumulate</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">priorsigma</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores.normalizeOutputScores" title="Permalink to this definition">¶</a></dt>
<dd><p>normalize the raw output scores to feed into the Perr computation
Inputs:</p>
<blockquote>
<div><p>Fy   - (nM,nTr,nEp,nY) [#Y x #Epoch x #Trials x nModels]:float
validTgt - (nM,nTr,nY) [ #Y x #Trials x nModels ]:bool indication of which outputs are used in each trial
badFyThresh - threshold for detction of bad Fy entry, in std-dev
centFy   - bool, do we center Fy before computing  <em>important</em>  (true)
nEpochCorrection - int, number of epochs to use a base for correction of number epochs in the sum.</p>
<blockquote>
<div><p>basically, nEpoch &lt; nEpochCorrection have highly increased Perr, so unlikely to be selected</p>
</div></blockquote>
<dl>
<dt>minDecisLen - int, number of epochs to use as base for distribution of time-based decision points.</dt><dd><blockquote>
<div><p>i.e. decisions at, [1,2,4,…2^n]*exptDistDecis</p>
</div></blockquote>
<p>OR: minDecisLen&lt;0 =&gt; decision point every abs(minDeicsLen) epochs</p>
</dd>
</dl>
<p>maxDecisLen   - maximum number of epochs for a decision
bwdAccumulate - [bool], accumulate data backwards from last epoch gathered
prior_sigma (float,float) - prior estimate of the variance and it’s equivalent samples weight (sigma,N)</p>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>ssFy - (nM,nTr,nDecis,nY) [#Y x #decisPts x #Trials x #Models] scaled summed scores
sFy_scale - (nM,nTr,nDecis,1) [1 x #decisPts x #Trails x #Models] the normalization scaling factor
Nep - (nDecis) [ #decisPts x 1 ] number of epochs included in each score
nEp,nY - (nTrl) [ 1 x #Trials ] the detected number epoch/output for each trial</p>
</dd>
</dl>
<p>Copyright (c) MindAffect B.V. 2018</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores.plot_normalizedScores">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores.</code><code class="sig-name descname">plot_normalizedScores</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">ssFy</span></em>, <em class="sig-param"><span class="n">scale_sFy</span></em>, <em class="sig-param"><span class="n">decisIdx</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores.plot_normalizedScores" title="Permalink to this definition">¶</a></dt>
<dd><p>plot the normalized score and raw summed score for comparsion</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores.testcase">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores.</code><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.normalizeOutputScores_streamed">
<span id="mindaffectbci-decoder-normalizeoutputscores-streamed-module"></span><h2>mindaffectBCI.decoder.normalizeOutputScores_streamed module<a class="headerlink" href="#module-mindaffectBCI.decoder.normalizeOutputScores_streamed" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores_streamed.compute_pval_curve">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores_streamed.</code><code class="sig-name descname">compute_pval_curve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">pval</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores_streamed.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores_streamed.compute_pval_curve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores_streamed.compute_softmax_curve">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores_streamed.</code><code class="sig-name descname">compute_softmax_curve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">pval</span></em>, <em class="sig-param"><span class="n">scale</span><span class="o">=</span><span class="default_value">3</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores_streamed.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores_streamed.compute_softmax_curve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores_streamed.incremental_estimate_noise_variance">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores_streamed.</code><code class="sig-name descname">incremental_estimate_noise_variance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">old_sigma2</span></em>, <em class="sig-param"><span class="n">filtLen</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores_streamed.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores_streamed.incremental_estimate_noise_variance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores_streamed.normalizeOutputScores_streamed">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores_streamed.</code><code class="sig-name descname">normalizeOutputScores_streamed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">validTgt</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">badFyThresh</span><span class="o">=</span><span class="default_value">6</span></em>, <em class="sig-param"><span class="n">centFy</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">blockSize</span><span class="o">=</span><span class="default_value">30</span></em>, <em class="sig-param"><span class="n">filtLen</span><span class="o">=</span><span class="default_value">5</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores_streamed.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores_streamed.normalizeOutputScores_streamed" title="Permalink to this definition">¶</a></dt>
<dd><p>normalize the raw output scores to feed into the Perr computation
Inputs:</p>
<blockquote>
<div><p>Fy   - (nM,nTr,nEp,nY):float
validTgt - (nM,nTr,nY):bool indication of which outputs are used in each trial</p>
<blockquote>
<div><p>badFyThresh - threshold for detction of bad Fy entry, in std-dev
centFy   - bool, do we center Fy before computing  <em>important</em>  (true)
blockSize  - maximum number of epochs single normalized sum</p>
</div></blockquote>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>ssFy - (nM,nTr,nDecis,nY):float  scaled summed scores
scale_sFy - (nM,nTr,nDecis):float scaling factor for each decision point
N - (nDecis):int the number of elements summed in each block</p>
</dd>
</dl>
<p>Copyright (c) MindAffect B.V. 2018</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores_streamed.softmax_nout_corr">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores_streamed.</code><code class="sig-name descname">softmax_nout_corr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores_streamed.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores_streamed.softmax_nout_corr" title="Permalink to this definition">¶</a></dt>
<dd><p>approximate correction factor for probabilities out of soft-max to correct for number of outputs</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores_streamed.softmax_vs_nout">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores_streamed.</code><code class="sig-name descname">softmax_vs_nout</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nruns</span></em>, <em class="sig-param"><span class="n">nout</span></em>, <em class="sig-param"><span class="n">sscale</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores_streamed.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores_streamed.softmax_vs_nout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.normalizeOutputScores_streamed.testcase">
<code class="sig-prename descclassname">mindaffectBCI.decoder.normalizeOutputScores_streamed.</code><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/normalizeOutputScores_streamed.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.normalizeOutputScores_streamed.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="mindaffectbci-decoder-offline-analysis-module">
<h2>mindaffectBCI.decoder.offline_analysis module<a class="headerlink" href="#mindaffectbci-decoder-offline-analysis-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-mindaffectBCI.decoder.preprocess">
<span id="mindaffectbci-decoder-preprocess-module"></span><h2>mindaffectBCI.decoder.preprocess module<a class="headerlink" href="#module-mindaffectBCI.decoder.preprocess" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.preprocess.butter_filterbank">
<code class="sig-prename descclassname">mindaffectBCI.decoder.preprocess.</code><code class="sig-name descname">butter_filterbank</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">filterbank</span></em>, <em class="sig-param"><span class="n">fs</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">axis</span><span class="o">=</span><span class="default_value">- 2</span></em>, <em class="sig-param"><span class="n">order</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">ftype</span><span class="o">=</span><span class="default_value">'butter'</span></em>, <em class="sig-param"><span class="n">verb</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/preprocess.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.preprocess.butter_filterbank" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.preprocess.extract_envelope">
<code class="sig-prename descclassname">mindaffectBCI.decoder.preprocess.</code><code class="sig-name descname">extract_envelope</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">fs</span></em>, <em class="sig-param"><span class="n">stopband</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">whiten</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">filterbank</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">env_stopband</span><span class="o">=</span><span class="default_value">10, - 1</span></em>, <em class="sig-param"><span class="n">verb</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">plot</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/preprocess.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.preprocess.extract_envelope" title="Permalink to this definition">¶</a></dt>
<dd><p>extract the envelope from the input data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>[</em><em>type</em><em>]</em>) – [description]</p></li>
<li><p><strong>fs</strong> (<em>[</em><em>type</em><em>]</em>) – [description]</p></li>
<li><p><strong>stopband</strong> (<em>[</em><em>type</em><em>]</em><em>, </em><em>optional</em>) – pre-filter stop band. Defaults to None.</p></li>
<li><p><strong>whiten</strong> (<em>bool</em><em>, </em><em>optional</em>) – flag if we spatially whiten before envelope extraction. Defaults to True.</p></li>
<li><p><strong>filterbank</strong> (<em>[</em><em>type</em><em>]</em><em>, </em><em>optional</em>) – set of filters to apply to extract the envelope for each filter output. Defaults to None.</p></li>
<li><p><strong>log</strong> (<em>bool</em><em>, </em><em>optional</em>) – flag if we return raw power or log-power. Defaults to True.</p></li>
<li><p><strong>env_stopband</strong> (<em>tuple</em><em>, </em><em>optional</em>) – post-filter on the extracted envelopes. Defaults to (10,-1).</p></li>
<li><p><strong>verb</strong> (<em>bool</em><em>, </em><em>optional</em>) – verbosity level. Defaults to False.</p></li>
<li><p><strong>plot</strong> (<em>bool</em><em>, </em><em>optional</em>) – flag if we plot the result of each preprocessing step. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the extracted envelopes</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>X</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.preprocess.plot_grand_average_spectrum">
<code class="sig-prename descclassname">mindaffectBCI.decoder.preprocess.</code><code class="sig-name descname">plot_grand_average_spectrum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">fs</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">axis</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">- 2</span></em>, <em class="sig-param"><span class="n">ch_names</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/preprocess.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.preprocess.plot_grand_average_spectrum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.preprocess.preprocess">
<code class="sig-prename descclassname">mindaffectBCI.decoder.preprocess.</code><code class="sig-name descname">preprocess</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">whiten</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">whiten_spectrum</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">badChannelThresh</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">badTrialThresh</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">center</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">car</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">stopband</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">filterbank</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/preprocess.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.preprocess.preprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>apply simple pre-processing to an input dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>[</em><em>type</em><em>]</em>) – the EEG data (tr,samp,d)</p></li>
<li><p><strong>Y</strong> (<em>[</em><em>type</em><em>]</em>) – the stimulus (tr,samp,e)</p></li>
<li><p><strong>coords</strong> (<em>[</em><em>type</em><em>]</em>) – [description]</p></li>
<li><p><strong>whiten</strong> (<em>float</em><em>, </em><em>optional</em>) – if &gt;0 then strength of the spatially regularized whitener. Defaults to False.</p></li>
<li><p><strong>whiten_spectrum</strong> (<em>float</em><em>, </em><em>optional</em>) – if &gt;0 then strength of the spectrally regularized whitener. Defaults to False.</p></li>
<li><p><strong>badChannelThresh</strong> (<em>[</em><em>type</em><em>]</em><em>, </em><em>optional</em>) – threshold in standard deviations for detection and removal of bad channels. Defaults to None.</p></li>
<li><p><strong>badTrialThresh</strong> (<em>[</em><em>type</em><em>]</em><em>, </em><em>optional</em>) – threshold in standard deviations for detection and removal of bad trials. Defaults to None.</p></li>
<li><p><strong>center</strong> (<em>bool</em><em>, </em><em>optional</em>) – flag if we should temporally center the data. Defaults to False.</p></li>
<li><p><strong>car</strong> (<em>bool</em><em>, </em><em>optional</em>) – flag if we should spatially common-average-reference the data. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the EEG data (tr,samp,d)
Y ([type]): the stimulus (tr,samp,e)
coords ([type]): meta-info for the data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>X ([type])</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.preprocess.rmBadChannels">
<code class="sig-prename descclassname">mindaffectBCI.decoder.preprocess.</code><code class="sig-name descname">rmBadChannels</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">Y</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">thresh</span><span class="o">=</span><span class="default_value">3.5</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/preprocess.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.preprocess.rmBadChannels" title="Permalink to this definition">¶</a></dt>
<dd><p>remove bad channels from the input dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>[</em><em>np.ndarray</em><em>]</em>) – the eeg data as (trl,sample,channel)</p></li>
<li><p><strong>Y</strong> (<em>[</em><em>np.ndarray</em><em>]</em>) – the associated stimulus info as (trl,sample,stim)</p></li>
<li><p><strong>coords</strong> (<em>[</em><em>type</em><em>]</em>) – the meta-info about the channel</p></li>
<li><p><strong>thresh</strong> (<em>float</em><em>, </em><em>optional</em>) – threshold in standard-deviations for removal. Defaults to 3.5.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>X (np.ndarray)
Y (np.ndarray)
coords</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.preprocess.rmBadTrial">
<code class="sig-prename descclassname">mindaffectBCI.decoder.preprocess.</code><code class="sig-name descname">rmBadTrial</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">thresh</span><span class="o">=</span><span class="default_value">3.5</span></em>, <em class="sig-param"><span class="n">verb</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/preprocess.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.preprocess.rmBadTrial" title="Permalink to this definition">¶</a></dt>
<dd><p>[summary]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>[</em><em>np.ndarray</em><em>]</em>) – the eeg data as (trl,sample,channel)</p></li>
<li><p><strong>Y</strong> (<em>[</em><em>np.ndarray</em><em>]</em>) – the associated stimulus info as (trl,sample,stim)</p></li>
<li><p><strong>coords</strong> (<em>[</em><em>type</em><em>]</em>) – the meta-info about the channel</p></li>
<li><p><strong>thresh</strong> (<em>float</em><em>, </em><em>optional</em>) – threshold in standard-deviations for removal. Defaults to 3.5.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>X (np.ndarray)
Y (np.ndarray)
coords</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.preprocess.spatially_whiten">
<code class="sig-prename descclassname">mindaffectBCI.decoder.preprocess.</code><code class="sig-name descname">spatially_whiten</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/preprocess.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.preprocess.spatially_whiten" title="Permalink to this definition">¶</a></dt>
<dd><p>spatially whiten the nd-array X</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X</strong> (<em>np.ndarray</em>) – the data to be whitened, with channels/space in the <em>last</em> axis</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the whitened X
W (np.ndarray): the whitening matrix used to whiten X</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>X (np.ndarray)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.preprocess.spectrally_whiten">
<code class="sig-prename descclassname">mindaffectBCI.decoder.preprocess.</code><code class="sig-name descname">spectrally_whiten</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">reg</span><span class="o">=</span><span class="default_value">0.01</span></em>, <em class="sig-param"><span class="n">axis</span><span class="o">=</span><span class="default_value">- 2</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/preprocess.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.preprocess.spectrally_whiten" title="Permalink to this definition">¶</a></dt>
<dd><p>spatially whiten the nd-array X</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X</strong> (<em>np.ndarray</em>) – the data to be whitened, with channels/space in the <em>last</em> axis</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the whitened X
W (np.ndarray): the whitening matrix used to whiten X</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>X (np.ndarray)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.preprocess.testCases">
<code class="sig-prename descclassname">mindaffectBCI.decoder.preprocess.</code><code class="sig-name descname">testCases</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/preprocess.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.preprocess.testCases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.readCapInf">
<span id="mindaffectbci-decoder-readcapinf-module"></span><h2>mindaffectBCI.decoder.readCapInf module<a class="headerlink" href="#module-mindaffectBCI.decoder.readCapInf" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.readCapInf.getPosInfo">
<code class="sig-prename descclassname">mindaffectBCI.decoder.readCapInf.</code><code class="sig-name descname">getPosInfo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">chnames</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">capFile</span><span class="o">=</span><span class="default_value">'1010'</span></em>, <em class="sig-param"><span class="n">overridechnms</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">prefixMatch</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verb</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">capDir</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/readCapInf.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.readCapInf.getPosInfo" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>add electrode position info to a dimInfo structure</p>
<p>cnames,pos2d,pos3d,iseeg=getPosInfo(di,capFile,overridechnms,prefixMatch,verb,capDir)</p>
</div></blockquote>
<dl class="simple">
<dt>Inputs:</dt><dd><p>cnames – channel names to get pos-info for
capFile – file name of a file which contains the pos-info for this cap
overridechnms – flag that we should ignore the channel names in di
prefixMatch  – [bool] match channel names if only the start matches?
verb         – [int] verbosity level  (0)
capDir       – ‘str’ directory to search for capFile</p>
</dd>
<dt>Outputs:</dt><dd><p>cnames – [str] the names of the channels
xy – (nCh,2):float the 2d position of the channels
xyz – (nCh,2):float the 3d position of the channels
iseeg - (nCh,):bool flag if this is an eeg channel, i.e. if it’s name matched</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.readCapInf.latlong2xy">
<code class="sig-prename descclassname">mindaffectBCI.decoder.readCapInf.</code><code class="sig-name descname">latlong2xy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">latlong</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/readCapInf.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.readCapInf.latlong2xy" title="Permalink to this definition">¶</a></dt>
<dd><p>convert lat-long to 2-d unrolled x,y coordinates</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.readCapInf.latlong2xyz">
<code class="sig-prename descclassname">mindaffectBCI.decoder.readCapInf.</code><code class="sig-name descname">latlong2xyz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">latlong</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/readCapInf.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.readCapInf.latlong2xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>convert lat-long into 3-d x,y,z coords on the sphere</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.readCapInf.readCapInf">
<code class="sig-prename descclassname">mindaffectBCI.decoder.readCapInf.</code><code class="sig-name descname">readCapInf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cap</span><span class="o">=</span><span class="default_value">'1010.txt'</span></em>, <em class="sig-param"><span class="n">capRoots</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verb</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/readCapInf.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.readCapInf.readCapInf" title="Permalink to this definition">¶</a></dt>
<dd><p>read a cap file</p>
<p>Cname,latlong,xy,xyz,capfile=readCapInf(cap,capDir)</p>
<blockquote>
<div><p>Inputs:</p>
</div></blockquote>
<p>cap     – file name of the cap-file
capRoot – directory(s) to look for caps in ([‘.’,mfiledir,mfiledir’/positions’,’../../resources/caps/’])</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.readCapInf.testCase">
<code class="sig-prename descclassname">mindaffectBCI.decoder.readCapInf.</code><code class="sig-name descname">testCase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/readCapInf.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.readCapInf.testCase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.readCapInf.xy2latlong">
<code class="sig-prename descclassname">mindaffectBCI.decoder.readCapInf.</code><code class="sig-name descname">xy2latlong</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xy</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/readCapInf.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.readCapInf.xy2latlong" title="Permalink to this definition">¶</a></dt>
<dd><p>convert xy to lat-long, taking care to prevent division by 0</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.readCapInf.xyz2xy">
<code class="sig-prename descclassname">mindaffectBCI.decoder.readCapInf.</code><code class="sig-name descname">xyz2xy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xyz</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/readCapInf.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.readCapInf.xyz2xy" title="Permalink to this definition">¶</a></dt>
<dd><p>convert 3d xyz coords to unrolled 2d xy positions</p>
</dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.scoreOutput">
<span id="mindaffectbci-decoder-scoreoutput-module"></span><h2>mindaffectBCI.decoder.scoreOutput module<a class="headerlink" href="#module-mindaffectBCI.decoder.scoreOutput" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreOutput.convWX">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreOutput.</code><code class="sig-name descname">convWX</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">W</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreOutput.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreOutput.convWX" title="Permalink to this definition">¶</a></dt>
<dd><p>apply spatial filter W  to X</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreOutput.convXYR">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreOutput.</code><code class="sig-name descname">convXYR</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">W</span></em>, <em class="sig-param"><span class="n">R</span></em>, <em class="sig-param"><span class="n">offset</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreOutput.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreOutput.convXYR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreOutput.convYR">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreOutput.</code><code class="sig-name descname">convYR</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">R</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreOutput.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreOutput.convYR" title="Permalink to this definition">¶</a></dt>
<dd><p>compute the convolution of Y with R</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreOutput.datasettest">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreOutput.</code><code class="sig-name descname">datasettest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreOutput.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreOutput.datasettest" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreOutput.dedupY0">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreOutput.</code><code class="sig-name descname">dedupY0</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">zerodup</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">yfeatdim</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreOutput.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreOutput.dedupY0" title="Permalink to this definition">¶</a></dt>
<dd><p>remove outputs which are duplicates of the first (objID==0) output
Inputs:</p>
<blockquote>
<div><p>Y=(tr,ep,Y,e)
zerodup : bool</p>
<blockquote>
<div><p>if True, then if mi is the duplicate, then zero the  duplicate, i.e. of Y[…,mi,:]=0
else, we zero out ojID==0, i.e. Y[…,0,:]=0</p>
</div></blockquote>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>Y=(tr,ep,Y,e) version of Y with duplicates of 1st row of Y set to 0</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreOutput.plot_Fy">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreOutput.</code><code class="sig-name descname">plot_Fy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">cumsum</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreOutput.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreOutput.plot_Fy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreOutput.plot_Fycomparsion">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreOutput.</code><code class="sig-name descname">plot_Fycomparsion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">Fys</span></em>, <em class="sig-param"><span class="n">ti</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreOutput.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreOutput.plot_Fycomparsion" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreOutput.plot_outputscore">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreOutput.</code><code class="sig-name descname">plot_outputscore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">W</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">R</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreOutput.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreOutput.plot_outputscore" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreOutput.scoreOutput">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreOutput.</code><code class="sig-name descname">scoreOutput</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fe</span></em>, <em class="sig-param"><span class="n">Ye</span></em>, <em class="sig-param"><span class="n">dedup0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">R</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">outputscore</span><span class="o">=</span><span class="default_value">'ip'</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreOutput.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreOutput.scoreOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>score each output given information on which stim-sequences corrospend to which inputs
Inputs:</p>
<blockquote>
<div><p>Fe  = (nM,nTrl,nSamp,nE) similarity score for each event type for each stimulus
Ye  = (nTrl,nSamp,nY,nE) Indicator for which events occured for which outputs</p>
<blockquote>
<div><p>nE=#event-types  nY=#possible-outputs  nEpoch=#stimulus events to process</p>
</div></blockquote>
<dl class="simple">
<dt>R = (nM,nfilt,nE,tau) FWD-model (impulse response) for each of the event types, used to correct the</dt><dd><p>scores for correlated responses.</p>
</dd>
</dl>
<p>dedup0 = bool - remove duplicate copies of output O (used when cross validating calibration data)</p>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>Fy  = (nM,nTrl,nEp,nY) similarity score for each input epoch for each output</p>
</dd>
</dl>
<p>Copyright (c) MindAffect B.V. 2018</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreOutput.testcases">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreOutput.</code><code class="sig-name descname">testcases</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreOutput.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreOutput.testcases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.scoreStimulus">
<span id="mindaffectbci-decoder-scorestimulus-module"></span><h2>mindaffectBCI.decoder.scoreStimulus module<a class="headerlink" href="#module-mindaffectBCI.decoder.scoreStimulus" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreStimulus.factored2full">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreStimulus.</code><code class="sig-name descname">factored2full</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">W</span></em>, <em class="sig-param"><span class="n">R</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreStimulus.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreStimulus.factored2full" title="Permalink to this definition">¶</a></dt>
<dd><p>convert a factored spatio-temporal model to a full model
Inputs:</p>
<blockquote>
<div><p>W (nM,rank,d) spatial filter set (BWD model)
R (nM,rank,e,tau) temporal filter set (FWD model)</p>
</div></blockquote>
<dl class="simple">
<dt>Output:</dt><dd><p>W (nM,e,tau,d) spatio-temporal filter (BWD model)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreStimulus.plot_Fe">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreStimulus.</code><code class="sig-name descname">plot_Fe</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Fe</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreStimulus.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreStimulus.plot_Fe" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreStimulus.scoreStimulus">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreStimulus.</code><code class="sig-name descname">scoreStimulus</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">W</span></em>, <em class="sig-param"><span class="n">R</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">b</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">isepoched</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreStimulus.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreStimulus.scoreStimulus" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply spatio-temporal (possibly factored) model to data
Inputs:</p>
<blockquote>
<div><blockquote>
<div><dl>
<dt>X = (nTrl x nSamp x d) raw response for the current stimulus event</dt><dd><blockquote>
<div><p>d=#electrodes tau=#response-samples  nEpoch=#stimulus events to process</p>
</div></blockquote>
<dl class="simple">
<dt>OR</dt><dd><p>(nTrl x nEpoch x tau x d) pre-sliced raw data</p>
</dd>
</dl>
</dd>
</dl>
<p>W = (nM x nfilt x d) spatial filters for each output
R = (nM x nfilt x nE x tau) responses for each stimulus event for each output</p>
</div></blockquote>
<dl class="simple">
<dt>OR</dt><dd><p>W = (nM x nE x tau x d) spatio-temporal filter per event type and model
R = None
b = (nE,1) bias for each stimulus type
offset = 0 (1,1) offset in X for applying W</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>Fe= (nM x nTrl x nEpoch/nSamp x nE) similarity score for each input epoch for each output</p>
</dd>
</dl>
<p>Copyright (c) MindAffect B.V. 2018</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreStimulus.scoreStimulusCont">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreStimulus.</code><code class="sig-name descname">scoreStimulusCont</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">W</span></em>, <em class="sig-param"><span class="n">R</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">b</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreStimulus.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreStimulus.scoreStimulusCont" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply spatio-tempoal (possibly factored) model to raw (non epoched) data</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreStimulus.scoreStimulusEpoch">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreStimulus.</code><code class="sig-name descname">scoreStimulusEpoch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">W</span></em>, <em class="sig-param"><span class="n">R</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">b</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreStimulus.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreStimulus.scoreStimulusEpoch" title="Permalink to this definition">¶</a></dt>
<dd><dl>
<dt>Apply spatio-temporal (possibly factored) model to epoched data</dt><dd><blockquote>
<div><p>X = (nTrl x nEpoch x tau x d) pre-sliced raw data
W = (nM x nfilt x d) spatial filters for each output
R = (nM x nfilt x nE x tau) responses for each stimulus event for each output</p>
</div></blockquote>
<dl class="simple">
<dt>OR</dt><dd><p>W = (nM x nE x tau x d) spatio-temporal filter per event type and model
R = None
b = (nE,1) offset for each stimulus type</p>
</dd>
</dl>
</dd>
<dt>Outputs:</dt><dd><p>Fe= (nM x nTrl x nEpoch/nSamp x nE) similarity score for each input epoch for each output</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreStimulus.scoreStimulusEpoch_factored">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreStimulus.</code><code class="sig-name descname">scoreStimulusEpoch_factored</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">W</span></em>, <em class="sig-param"><span class="n">R</span></em>, <em class="sig-param"><span class="n">b</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreStimulus.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreStimulus.scoreStimulusEpoch_factored" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Apply factored spatio-temporal model to epoched data</dt><dd><p>X = (nTrl x nEpoch x tau x d) pre-sliced raw data
W = (nM x nfilt x d) spatial filters for each output
R = (nM x nfilt x nE x tau) responses for each stimulus event for each output
b = (nE,1) offset for each stimulus type</p>
</dd>
<dt>Outputs:</dt><dd><p>Fe= (nM x nTrl x nEpoch x nE) similarity score for each input epoch for each output</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreStimulus.scoreStimulusEpoch_full">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreStimulus.</code><code class="sig-name descname">scoreStimulusEpoch_full</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">W</span></em>, <em class="sig-param"><span class="n">b</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreStimulus.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreStimulus.scoreStimulusEpoch_full" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Apply full spatio-temporal model to epoched data</dt><dd><p>X = (nTrl x nEpoch x tau x d) pre-sliced raw data
W = (nM x nE x tau x d) spatio-temporal filter per event type and model
b = (nE,1) offset for each stimulus type</p>
</dd>
<dt>Outputs:</dt><dd><p>Fe= (nM x nTrl x nEpoch/nSamp x nE) similarity score for each input epoch for each output</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.scoreStimulus.testcase">
<code class="sig-prename descclassname">mindaffectBCI.decoder.scoreStimulus.</code><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/scoreStimulus.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.scoreStimulus.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.sigViewer">
<span id="mindaffectbci-decoder-sigviewer-module"></span><h2>mindaffectBCI.decoder.sigViewer module<a class="headerlink" href="#module-mindaffectBCI.decoder.sigViewer" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.sigViewer.sigViewer">
<code class="sig-prename descclassname">mindaffectBCI.decoder.sigViewer.</code><code class="sig-name descname">sigViewer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ui</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface" title="mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface">mindaffectBCI.decoder.UtopiaDataInterface.UtopiaDataInterface</a></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">hostname</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout_ms</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">inf</span></em>, <em class="sig-param"><span class="n">center</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timerange</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em>, <em class="sig-param"><span class="n">nstimulus_lines</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">ndata_lines</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">- 1</span></em>, <em class="sig-param"><span class="n">datastep</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">20</span></em>, <em class="sig-param"><span class="n">stimstep</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/sigViewer.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.sigViewer.sigViewer" title="Permalink to this definition">¶</a></dt>
<dd><p>simple sig-viewer using the ring-buffer for testing</p>
</dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.startUtopiaHub">
<span id="mindaffectbci-decoder-startutopiahub-module"></span><h2>mindaffectBCI.decoder.startUtopiaHub module<a class="headerlink" href="#module-mindaffectBCI.decoder.startUtopiaHub" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.startUtopiaHub.run">
<code class="sig-prename descclassname">mindaffectBCI.decoder.startUtopiaHub.</code><code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">label</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/startUtopiaHub.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.startUtopiaHub.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.stim2event">
<span id="mindaffectbci-decoder-stim2event-module"></span><h2>mindaffectBCI.decoder.stim2event module<a class="headerlink" href="#module-mindaffectBCI.decoder.stim2event" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.stim2event.stim2event">
<code class="sig-prename descclassname">mindaffectBCI.decoder.stim2event.</code><code class="sig-name descname">stim2event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">M</span></em>, <em class="sig-param"><span class="n">evtypes</span><span class="o">=</span><span class="default_value">'re', 'fe'</span></em>, <em class="sig-param"><span class="n">axis</span><span class="o">=</span><span class="default_value">- 1</span></em>, <em class="sig-param"><span class="n">oM</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/stim2event.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.stim2event.stim2event" title="Permalink to this definition">¶</a></dt>
<dd><p>convert per-sample stimulus sequence into per-sample event sequence (e.g. rising/falling edge, or long/short flash)
Inputs:</p>
<blockquote>
<div><p>M      - (…samp) or (…,samp,nY) for and/non-target features
evnames - [nE]:str list of strings:</p>
<blockquote>
<div><p>“0”, “1”, “00”, “11”, “01” (aka. ‘re’), “10” (aka, fe), “010” (aka. short), “0110” (aka long)
“nt”+evtname : non-target event, i.e. evtname occured for any other target
“any”+evtname: any event, i.e. evtname occured for <em>any</em> target
“rest” - not any of the other event types, N.B. must be <em>last</em> in event list
“raw” - unchanged input intensity coding
“grad” - 1st temporal derivative of the raw intensity</p>
</div></blockquote>
<p>axis - (-1) the axis of M which runs along ‘time’
oM - (…osamp) or (…,osamp,nY) prefix stimulus values of M, used to incrementally compute the  stimulus features</p>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>evt    - (M.shape,nE) event sequence</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<dl class="simple">
<dt>#For a P300 bci, with target vs. non-target response use:</dt><dd><p>M = np.array([[1,0,0,0,0,0,1,0],[0,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,0]]).T
E = stim2event(M,evtypes=[‘re’,’ntre’], axis=-2)</p>
</dd>
<dt>#Or modeling as two responses, target-stim-response and any-stim-response</dt><dd><p>E = stim2event(M,evtypes=(‘re’,’anyre’), axis=-2)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.stim2event.testcase">
<code class="sig-prename descclassname">mindaffectBCI.decoder.stim2event.</code><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/stim2event.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.stim2event.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.timestamp_check">
<span id="mindaffectbci-decoder-timestamp-check-module"></span><h2>mindaffectBCI.decoder.timestamp_check module<a class="headerlink" href="#module-mindaffectBCI.decoder.timestamp_check" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.timestamp_check.timestampPlot">
<code class="sig-prename descclassname">mindaffectBCI.decoder.timestamp_check.</code><code class="sig-name descname">timestampPlot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/timestamp_check.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.timestamp_check.timestampPlot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.trigger_check">
<span id="mindaffectbci-decoder-trigger-check-module"></span><h2>mindaffectBCI.decoder.trigger_check module<a class="headerlink" href="#module-mindaffectBCI.decoder.trigger_check" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.trigger_check.triggerPlot">
<code class="sig-prename descclassname">mindaffectBCI.decoder.trigger_check.</code><code class="sig-name descname">triggerPlot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">'0', '1'</span></em>, <em class="sig-param"><span class="n">tau_ms</span><span class="o">=</span><span class="default_value">400</span></em>, <em class="sig-param"><span class="n">offset_ms</span><span class="o">=</span><span class="default_value">- 50</span></em>, <em class="sig-param"><span class="n">maxsize</span><span class="o">=</span><span class="default_value">6000</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/trigger_check.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.trigger_check.triggerPlot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.updateSummaryStatistics">
<span id="mindaffectbci-decoder-updatesummarystatistics-module"></span><h2>mindaffectBCI.decoder.updateSummaryStatistics module<a class="headerlink" href="#module-mindaffectBCI.decoder.updateSummaryStatistics" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.updateSummaryStatistics.autocov">
<code class="sig-prename descclassname">mindaffectBCI.decoder.updateSummaryStatistics.</code><code class="sig-name descname">autocov</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">tau</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/updateSummaryStatistics.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.updateSummaryStatistics.autocov" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the cross-auto-correlation of X, i.e. spatial-temporal covariance
Inputs:</p>
<blockquote>
<div><dl class="simple">
<dt>X – (nTrl, nSamp, d) the data to have autocov computed</dt><dd><p>nSamp = temporal dim, d = spatial dim</p>
</dd>
</dl>
<p>tau  – number of samples in the autocov</p>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>Ctdtd – (tau, d, tau, d)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.updateSummaryStatistics.cov">
<code class="sig-prename descclassname">mindaffectBCI.decoder.updateSummaryStatistics.</code><code class="sig-name descname">cov</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/updateSummaryStatistics.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.updateSummaryStatistics.cov" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the spatial covariance
Input:</p>
<blockquote>
<div><p>X = (…,d) data, with features in the last dimension</p>
</div></blockquote>
<dl class="simple">
<dt>Output:</dt><dd><p>Cxx = (d,d)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.updateSummaryStatistics.crossautocov">
<code class="sig-prename descclassname">mindaffectBCI.decoder.updateSummaryStatistics.</code><code class="sig-name descname">crossautocov</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">tau</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/updateSummaryStatistics.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.updateSummaryStatistics.crossautocov" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the cross-auto-correlation between 2 datasets, X,Y, i.e. the double spatial-temporal covariance
Inputs:</p>
<blockquote>
<div><dl class="simple">
<dt>X – (nTrl, nSamp, dx) the data to have autocov computed</dt><dd><p>nSamp = temporal dim, dx = spatial dim x</p>
</dd>
<dt>Y – (nTrl, nSamp, dy) the data to have autocov computed</dt><dd><p>nSamp = temporal dim, dy = spatial dim y</p>
</dd>
<dt>tau  – :int number of samples in the cov</dt><dd><dl class="simple">
<dt>OR</dt><dd><p>[int,int] time lags for x and y</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>Ctdtd – (taux, dx, tauy, dy)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.updateSummaryStatistics.plot_erp">
<code class="sig-prename descclassname">mindaffectBCI.decoder.updateSummaryStatistics.</code><code class="sig-name descname">plot_erp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">erp</span></em>, <em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">times</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ch_names</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">axis</span><span class="o">=</span><span class="default_value">- 1</span></em>, <em class="sig-param"><span class="n">plottype</span><span class="o">=</span><span class="default_value">'plot'</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">ylim</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/updateSummaryStatistics.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.updateSummaryStatistics.plot_erp" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a multi-plot of the event ERPs (as stored in erp)
erp = (nE, tau, d) current per output ERPs</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.updateSummaryStatistics.plot_factoredmodel">
<code class="sig-prename descclassname">mindaffectBCI.decoder.updateSummaryStatistics.</code><code class="sig-name descname">plot_factoredmodel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">A</span></em>, <em class="sig-param"><span class="n">R</span></em>, <em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">times</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ch_names</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ch_pos</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fs</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/updateSummaryStatistics.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.updateSummaryStatistics.plot_factoredmodel" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a multi-plot of a factored model
A = (k,d)
R = (k,e,tau)</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.updateSummaryStatistics.plot_summary_statistics">
<code class="sig-prename descclassname">mindaffectBCI.decoder.updateSummaryStatistics.</code><code class="sig-name descname">plot_summary_statistics</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Cxx</span></em>, <em class="sig-param"><span class="n">Cxy</span></em>, <em class="sig-param"><span class="n">Cyy</span></em>, <em class="sig-param"><span class="n">evtlabs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">times</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ch_names</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fs</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/updateSummaryStatistics.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.updateSummaryStatistics.plot_summary_statistics" title="Permalink to this definition">¶</a></dt>
<dd><p>Cxx =(d, d) updated data covariance
Cxy = (nY, nE, tau, d)  updated per output ERPs
Cyy = (nY, nE, tau, nE, tau) updated response covariance for each output</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.updateSummaryStatistics.testCases">
<code class="sig-prename descclassname">mindaffectBCI.decoder.updateSummaryStatistics.</code><code class="sig-name descname">testCases</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/updateSummaryStatistics.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.updateSummaryStatistics.testCases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.updateSummaryStatistics.testComputationMethods">
<code class="sig-prename descclassname">mindaffectBCI.decoder.updateSummaryStatistics.</code><code class="sig-name descname">testComputationMethods</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/updateSummaryStatistics.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.updateSummaryStatistics.testComputationMethods" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.updateSummaryStatistics.testSlicedvsContinuous">
<code class="sig-prename descclassname">mindaffectBCI.decoder.updateSummaryStatistics.</code><code class="sig-name descname">testSlicedvsContinuous</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/updateSummaryStatistics.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.updateSummaryStatistics.testSlicedvsContinuous" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.updateSummaryStatistics.updateCxx">
<code class="sig-prename descclassname">mindaffectBCI.decoder.updateSummaryStatistics.</code><code class="sig-name descname">updateCxx</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Cxx</span></em>, <em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">stimTimes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wght</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">center</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">unitnorm</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/updateSummaryStatistics.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.updateSummaryStatistics.updateCxx" title="Permalink to this definition">¶</a></dt>
<dd><p>Cxx = [d x d] current data covariance
X = (nTrl, nEp, tau, d) raw response for the current stimulus event</p>
<blockquote>
<div><blockquote>
<div><p>d=#electrodes tau=#response-samples  nEpoch=#stimulus events to process</p>
</div></blockquote>
<p>OR
(nTrl, nSamp, d)</p>
</div></blockquote>
<p>stimTimes_samp = (nTrl, nEp) sample times for start each epoch.  Used to detect
wght=[1x1]
center:bool - compute centered covariance? (True)</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.updateSummaryStatistics.updateCxy">
<code class="sig-prename descclassname">mindaffectBCI.decoder.updateSummaryStatistics.</code><code class="sig-name descname">updateCxy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Cxy</span></em>, <em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">stimTimes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wght</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">center</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verb</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">unitnorm</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/updateSummaryStatistics.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.updateSummaryStatistics.updateCxy" title="Permalink to this definition">¶</a></dt>
<dd><dl>
<dt>X = (nTrl, nEp, tau, d) raw response for the current stimulus event</dt><dd><blockquote>
<div><p>d=#electrodes tau=#response-samples  nEpoch=#stimulus events to process</p>
</div></blockquote>
<p>OR
(nTrl, nSamp, d) raw response at sample rate</p>
</dd>
<dt>Y = (nTrl, nEp, nY, nE) Indicator for which events occured for which outputs</dt><dd><blockquote>
<div><p>nE=#event-types  nY=#possible-outputs  nEpoch=#stimulus events to process</p>
</div></blockquote>
<p>OR
(nTrl, nSamp, nY, nE) event indicator at sample rate</p>
</dd>
<dt>stimTimes_samp = (nTrl, nEp) sample times for start each epoch.  Used to detect</dt><dd><p>overlapping responses</p>
</dd>
</dl>
<p>Cxy = (nY, nE, tau, d) current per output ERPs</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.updateSummaryStatistics.updateCyy">
<code class="sig-prename descclassname">mindaffectBCI.decoder.updateSummaryStatistics.</code><code class="sig-name descname">updateCyy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Cyy</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">stimTime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wght</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">zeropadded</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">unitnorm</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/updateSummaryStatistics.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.updateSummaryStatistics.updateCyy" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the Cyy tensors given new data
Inputs:</p>
<blockquote>
<div><p>Cyy – (nY, nE, tau, nE, tau) old Cyy info
Y – (nTrl, nEp/nSamp, nY, nE) the new stim info to be added</p>
<blockquote>
<div><p>Indicator for which events occured for which outputs
nE=#event-types  nY=#possible-outputs  nEpoch=#stimulus events to process</p>
</div></blockquote>
<p>tau  – number of samples in the stimulus response
stimTime – [] the times (in samples) of the epochs in Y</p>
<blockquote>
<div><p>None : if Y is already at sample rate</p>
</div></blockquote>
<p>zeropadded - bool - flag variable length Y are padded with 0s
wght – weighting for the new vs. old data
unitnorm(bool) : flag if we normalize the Cyy with number epochs</p>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>Cyy – (nY, nE, tau, nE, tau)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.updateSummaryStatistics.updateSummaryStatistics">
<code class="sig-prename descclassname">mindaffectBCI.decoder.updateSummaryStatistics.</code><code class="sig-name descname">updateSummaryStatistics</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">stimTimes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">Cxx</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">Cxy</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">Cyy</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">badEpThresh</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">halflife_samp</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">cxxp</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">cyyp</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">center</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/updateSummaryStatistics.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.updateSummaryStatistics.updateSummaryStatistics" title="Permalink to this definition">¶</a></dt>
<dd><dl>
<dt>Compute updated summary statistics (Cxx, Cxy, Cyy) for new data in X with event-info Y</dt><dd><p>[Cxx, Cxy, Cyy, state]=updateSummaryStatistics(X, Y, stimTime_samp, Cxx, Cxy, Cyy, state, halflife_samp, badEpThresh)</p>
</dd>
<dt>Inputs:</dt><dd><dl>
<dt>X = (nTrl, nEp, tau, d) [d x tau x nEpoch x nTrl] raw response for the current stimulus event</dt><dd><blockquote>
<div><p>d=#electrodes tau=#response-samples  nEpoch=#stimulus events to process</p>
</div></blockquote>
<dl class="simple">
<dt>OR</dt><dd><p>(nTrl, nSamp, d) [d x nSamp x nTrl ]</p>
</dd>
</dl>
</dd>
<dt>Y = (nTrl, nEp, nY, nE) [nE x nY x nEpoch x nTrl] Indicator for which events occured for which outputs</dt><dd><dl class="simple">
<dt>OR</dt><dd><dl class="simple">
<dt>(nTrl, nSamp, nY, nE) [nE x nY x nSamp x nTrl]</dt><dd><p>nE=#event-types  nY=#possible-outputs  nEpoch=#stimulus events to process</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>stimTimes_samp = (nTrl, nEp) [nEpoch x nTrl] sample times for start each epoch.  Used to detect</dt><dd><p>overlapping responses</p>
</dd>
</dl>
<p>tau = int - the length of the impulse response in samples (X.shape[1] or Cxy.shape[1] if given)
offset:int = relative shift of Y w.r.t. X
Cxx = [d x d] current data covariance
Cxy = (nY, nE, tau, d) [d x tau x nE x nY ] current per output ERPs
Cyy = (nY, nE, tau, nE, tau) [tau x nE x tau x nE x nY ] current response covariance for each output
badEpThresh = float, threshold for removing bad-data before fitting the summary statistics
center:bool - do we center the X data before computing the summary statistics? (True)
halflife_samp = float, forgetting factor for the updates</p>
<blockquote>
<div><p>Note: alpha = exp(log(.5)./(half-life)), half-life = log(.5)/log(alpha)</p>
</div></blockquote>
</dd>
<dt>Outputs:</dt><dd><p>Cxx = [d x d] updated data covariance
Cxy = (nY, nE, tau, d) [d x tau x nE x nY] updated per output ERPs
Cyy = (nY, nE, tau, nE, tau) [tau x nE x tau x nE x nY] updated response covariance for each output</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p># Supervised CCA
Y = (nEpoch/nSamp, nY, nE) [nE x nY x nEpoch] indicator for each event-type and output of it’s type in each epoch
X = (nEpoch/nSamp, tau, d) [d x tau x nEpoch] sliced pre-processed raw data into per-stimulus event responses
stimTimes = [nEpoch] sample numbers of the stimulus events</p>
<blockquote>
<div><p># OR None if X, Y are samples</p>
</div></blockquote>
<p>[Cxx, Cxy, Cyy] = updateSummaryStatistics(X, Y, 3*np.arange(X.shape[0]));
[J, w, r]=multipleCCA(Cxx, Cxy, Cyy)</p>
</dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.utils">
<span id="mindaffectbci-decoder-utils-module"></span><h2>mindaffectBCI.decoder.utils module<a class="headerlink" href="#module-mindaffectBCI.decoder.utils" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="mindaffectBCI.decoder.utils.RingBuffer">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">RingBuffer</code><span class="sig-paren">(</span><em class="sig-param">maxsize</em>, <em class="sig-param">shape</em>, <em class="sig-param">dtype=&lt;class 'numpy.float32'&gt;</em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.RingBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>time efficient linear ring-buffer for storing packed data, e.g. continguous np-arrays</p>
<dl class="py method">
<dt id="mindaffectBCI.decoder.utils.RingBuffer.append">
<code class="sig-name descname">append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.RingBuffer.append" title="Permalink to this definition">¶</a></dt>
<dd><p>add single element to the ring buffer</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.utils.RingBuffer.clear">
<code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.RingBuffer.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.utils.RingBuffer.extend">
<code class="sig-name descname">extend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.RingBuffer.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>add a group of elements to the ring buffer</p>
</dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.utils.RingBuffer.shape">
<em class="property">property </em><code class="sig-name descname">shape</code><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.RingBuffer.shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.utils.RingBuffer.unwrap">
<code class="sig-name descname">unwrap</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.RingBuffer.unwrap" title="Permalink to this definition">¶</a></dt>
<dd><p>get a view on the valid portion of the ring buffer</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.block_randomize">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">block_randomize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">true_target</span></em>, <em class="sig-param"><span class="n">npermute</span></em>, <em class="sig-param"><span class="n">axis</span><span class="o">=</span><span class="default_value">- 3</span></em>, <em class="sig-param"><span class="n">block_size</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.block_randomize" title="Permalink to this definition">¶</a></dt>
<dd><p>make a block random permutaton of the input array
Inputs:</p>
<blockquote>
<div><p>npermute: int - number permutations to make
true_target: (…, nEp, nY, e): true target value for nTrl trials of length nEp flashes
axis : int the axis along which to permute true_target</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.butter_sosfilt">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">butter_sosfilt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">stopband</span></em>, <em class="sig-param"><span class="n">fs</span></em>, <em class="sig-param"><span class="n">order</span><span class="o">=</span><span class="default_value">6</span></em>, <em class="sig-param"><span class="n">axis</span><span class="o">=</span><span class="default_value">- 2</span></em>, <em class="sig-param"><span class="n">zi</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">passband</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verb</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">ftype</span><span class="o">=</span><span class="default_value">'butter'</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.butter_sosfilt" title="Permalink to this definition">¶</a></dt>
<dd><p>use a (cascade of) butterworth SOS filter(s) to band-pass and (cascade of) band stop X along axis</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.equals_subarray">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">equals_subarray</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">a</span></em>, <em class="sig-param"><span class="n">pat</span></em>, <em class="sig-param"><span class="n">axis</span><span class="o">=</span><span class="default_value">- 1</span></em>, <em class="sig-param"><span class="n">match</span><span class="o">=</span><span class="default_value">- 1</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.equals_subarray" title="Permalink to this definition">¶</a></dt>
<dd><p>efficiently find matches of a 1-d sub-array along axis within an nd-array</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.extract_ringbuffer_segment">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">extract_ringbuffer_segment</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rb</span></em>, <em class="sig-param"><span class="n">bgn_ts</span></em>, <em class="sig-param"><span class="n">end_ts</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.extract_ringbuffer_segment" title="Permalink to this definition">¶</a></dt>
<dd><p>extract the data between start/end time stamps</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.idOutliers">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">idOutliers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">thresh</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">axis</span><span class="o">=</span><span class="default_value">- 2</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.idOutliers" title="Permalink to this definition">¶</a></dt>
<dd><p>identify outliers with excessively high power in the input data
Inputs:</p>
<blockquote>
<div><p>X:float the data to identify outliers in
axis:int (-2)  axis of X to sum to get power
thresh(float): threshold standard deviation for outlier detection
verbosity(int): verbosity level</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bool (X.shape axis==1) indicator for outlying elements
epPower:float (X.shape axis==1) power used to identify bad</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>badEp</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.iir_sosfilt_sos">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">iir_sosfilt_sos</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stopband</span></em>, <em class="sig-param"><span class="n">fs</span></em>, <em class="sig-param"><span class="n">order</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">ftype</span><span class="o">=</span><span class="default_value">'butter'</span></em>, <em class="sig-param"><span class="n">passband</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verb</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.iir_sosfilt_sos" title="Permalink to this definition">¶</a></dt>
<dd><p>given a set of filter cutoffs return butterworth sos coefficients</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.lab2ind">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">lab2ind</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lab</span></em>, <em class="sig-param"><span class="n">lab2class</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.lab2ind" title="Permalink to this definition">¶</a></dt>
<dd><p>convert a list of labels (as integers) to a class indicator matrix</p>
</dd></dl>

<dl class="py class">
<dt id="mindaffectBCI.decoder.utils.linear_trend_tracker">
<em class="property">class </em><code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">linear_trend_tracker</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">halflife</span><span class="o">=</span><span class="default_value">70</span></em>, <em class="sig-param"><span class="n">int_err_halflife</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">K_int_err</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">a0</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">b0</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.linear_trend_tracker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>linear trend tracker with adaptive forgetting factor</p>
<dl class="py method">
<dt id="mindaffectBCI.decoder.utils.linear_trend_tracker.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">keep_err</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.linear_trend_tracker.fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.utils.linear_trend_tracker.getX">
<code class="sig-name descname">getX</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.linear_trend_tracker.getX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.utils.linear_trend_tracker.getY">
<code class="sig-name descname">getY</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.linear_trend_tracker.getY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.utils.linear_trend_tracker.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keep_err</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">keep_model</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.linear_trend_tracker.reset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.utils.linear_trend_tracker.testcase">
<em class="property">static </em><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.linear_trend_tracker.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mindaffectBCI.decoder.utils.linear_trend_tracker.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.linear_trend_tracker.transform" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.randomSummaryStats">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">randomSummaryStats</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">nE</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">nY</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.randomSummaryStats" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.save_butter_sosfilt_coeff">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">save_butter_sosfilt_coeff</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stopband</span><span class="o">=</span><span class="default_value">0, 5, 25, - 1</span></em>, <em class="sig-param"><span class="n">fs</span><span class="o">=</span><span class="default_value">200</span></em>, <em class="sig-param"><span class="n">order</span><span class="o">=</span><span class="default_value">6</span></em>, <em class="sig-param"><span class="n">ftype</span><span class="o">=</span><span class="default_value">'butter'</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.save_butter_sosfilt_coeff" title="Permalink to this definition">¶</a></dt>
<dd><p>design a butterworth sos filter cascade and save the coefficients</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.sliceData">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">sliceData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">stimTimes_samp</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">10</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.sliceData" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.sliceY">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">sliceY</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">stimTimes_samp</span></em>, <em class="sig-param"><span class="n">featdim</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.sliceY" title="Permalink to this definition">¶</a></dt>
<dd><p>Y = (nTrl, nSamp, nY, nE) if featdim=True
OR
Y=(nTrl, nSamp, nY) if featdim=False #(nE x nY x nSamp x nTrl)</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.sosfilt_2d_py">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">sosfilt_2d_py</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sos</span></em>, <em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">axis</span><span class="o">=</span><span class="default_value">- 2</span></em>, <em class="sig-param"><span class="n">zi</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.sosfilt_2d_py" title="Permalink to this definition">¶</a></dt>
<dd><p>pure python fallback for second-order-sections filter in case scipy isn’t available</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.sosfilt_zi_py">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">sosfilt_zi_py</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sos</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.sosfilt_zi_py" title="Permalink to this definition">¶</a></dt>
<dd><p>compute an initial state for a second-order section filter</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.sosfilt_zi_warmup">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">sosfilt_zi_warmup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">zi</span></em>, <em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">axis</span><span class="o">=</span><span class="default_value">- 1</span></em>, <em class="sig-param"><span class="n">sos</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.sosfilt_zi_warmup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.testNoSignal">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">testNoSignal</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">nE</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">nY</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">isi</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nSamp</span><span class="o">=</span><span class="default_value">10000</span></em>, <em class="sig-param"><span class="n">nTrl</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.testNoSignal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.testSignal">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">testSignal</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nTrl</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">d</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">nE</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">nY</span><span class="o">=</span><span class="default_value">30</span></em>, <em class="sig-param"><span class="n">isi</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">nSamp</span><span class="o">=</span><span class="default_value">10000</span></em>, <em class="sig-param"><span class="n">stimthresh</span><span class="o">=</span><span class="default_value">0.6</span></em>, <em class="sig-param"><span class="n">noise2signal</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">irf</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.testSignal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.test_butter_sosfilt">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">test_butter_sosfilt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.test_butter_sosfilt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.test_sosfilt_py">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">test_sosfilt_py</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.test_sosfilt_py" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.testtestSignal">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">testtestSignal</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.testtestSignal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.upsample_codebook">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">upsample_codebook</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">trlen</span></em>, <em class="sig-param"><span class="n">cb</span></em>, <em class="sig-param"><span class="n">ep_idx</span></em>, <em class="sig-param"><span class="n">stim_dur_samp</span></em>, <em class="sig-param"><span class="n">offset_samp</span><span class="o">=</span><span class="default_value">0, 0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.upsample_codebook" title="Permalink to this definition">¶</a></dt>
<dd><p>upsample a codebook definition to sample rate
Inputs:</p>
<blockquote>
<div><p>trlen : (int) length after up-sampling
cb : (nTr, nEp, …) the codebook
ep_idx : (nTr, nEp) the indices of the codebook  entries
stim_dur_samp: (int) the amount of time the cb entry is held for
offset_samp : (2,):int the offset for the stimulus in the upsampled trlen data</p>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>Y : ( nTrl, trlen, …) the up-sampled codebook</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.window_axis">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">window_axis</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">a</span></em>, <em class="sig-param"><span class="n">winsz</span></em>, <em class="sig-param"><span class="n">axis</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">step</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">prependwindowdim</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.window_axis" title="Permalink to this definition">¶</a></dt>
<dd><p>efficient view-based slicing of equal-sized equally-spaced windows along a selected axis of a numpy nd-array</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.utils.zero_outliers">
<code class="sig-prename descclassname">mindaffectBCI.decoder.utils.</code><code class="sig-name descname">zero_outliers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">badEpThresh</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">badEpChThresh</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbosity</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/utils.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.utils.zero_outliers" title="Permalink to this definition">¶</a></dt>
<dd><p>identify and zero-out bad/outlying data</p>
<dl>
<dt>Inputs:</dt><dd><p>X = (nTrl, nSamp, d)
Y = (nTrl, nSamp, nY, nE) OR (nTrl, nSamp, nE)</p>
<blockquote>
<div><p>nE=#event-types  nY=#possible-outputs  nEpoch=#stimulus events to process</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder.zscore2Ptgt_softmax">
<span id="mindaffectbci-decoder-zscore2ptgt-softmax-module"></span><h2>mindaffectBCI.decoder.zscore2Ptgt_softmax module<a class="headerlink" href="#module-mindaffectBCI.decoder.zscore2Ptgt_softmax" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mindaffectBCI.decoder.zscore2Ptgt_softmax.calibrate_softmaxscale">
<code class="sig-prename descclassname">mindaffectBCI.decoder.zscore2Ptgt_softmax.</code><code class="sig-name descname">calibrate_softmaxscale</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">validTgt</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">scales</span><span class="o">=</span><span class="default_value">0.5, 1, 1.5, 2, 2.5, 3, 3.5, 4, 5, 7, 10, 15, 20, 30</span></em>, <em class="sig-param"><span class="n">MINP</span><span class="o">=</span><span class="default_value">0.01</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/zscore2Ptgt_softmax.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.zscore2Ptgt_softmax.calibrate_softmaxscale" title="Permalink to this definition">¶</a></dt>
<dd><p>attempt to calibrate the scale for a softmax decoder to return calibrated probabilities
Inputs:</p>
<blockquote>
<div><p>f - (nTrl,nDecis,nY) normalized accumulated scores]
validTgt = (nTrl,nY) [nY x #Trl]:bool which targets are valid in which trials
scales = set of possible soft-max scales to try
MINP - float, minimium P-value.  We clip the true-target p-val to this level as a way</p>
<blockquote>
<div><p>of forcing the fit to concentrate on getting the p-val right when high, rather than
over penalizing when it’s wrong</p>
</div></blockquote>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>softmaxscale - float, slope for softmax to return calibrated probabilities</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.zscore2Ptgt_softmax.softmax">
<code class="sig-prename descclassname">mindaffectBCI.decoder.zscore2Ptgt_softmax.</code><code class="sig-name descname">softmax</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">validTgt</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/zscore2Ptgt_softmax.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.zscore2Ptgt_softmax.softmax" title="Permalink to this definition">¶</a></dt>
<dd><p>simple softmax over final dim of input array, with compensation for missing inputs with validTgt mask.</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.zscore2Ptgt_softmax.softmax_nout_corr">
<code class="sig-prename descclassname">mindaffectBCI.decoder.zscore2Ptgt_softmax.</code><code class="sig-name descname">softmax_nout_corr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/zscore2Ptgt_softmax.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.zscore2Ptgt_softmax.softmax_nout_corr" title="Permalink to this definition">¶</a></dt>
<dd><p>approximate correction factor for probabilities out of soft-max to correct for number of outputs</p>
</dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.zscore2Ptgt_softmax.testcase">
<code class="sig-prename descclassname">mindaffectBCI.decoder.zscore2Ptgt_softmax.</code><code class="sig-name descname">testcase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/zscore2Ptgt_softmax.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.zscore2Ptgt_softmax.testcase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mindaffectBCI.decoder.zscore2Ptgt_softmax.zscore2Ptgt_softmax">
<code class="sig-prename descclassname">mindaffectBCI.decoder.zscore2Ptgt_softmax.</code><code class="sig-name descname">zscore2Ptgt_softmax</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">softmaxscale</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">validTgt</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">marginalizemodels</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="open_source/mindaffectBCI/decoder/zscore2Ptgt_softmax.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindaffectBCI.decoder.zscore2Ptgt_softmax.zscore2Ptgt_softmax" title="Permalink to this definition">¶</a></dt>
<dd><p>convert normalized output scores into target probabilities
Inputs:</p>
<blockquote>
<div><p>f - (nM,nTrl,nDecis,nY)  normalized accumulated scores]
softmaxscale - float, slope to scale from scores to probabilities
validtgtTrl = (nTrl,nY):bool which targets are valid in which trials</p>
</div></blockquote>
<dl class="simple">
<dt>Outputs:</dt><dd><p>Ptgt - (nTrl,nY) - target probability for each trial</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-mindaffectBCI.decoder">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-mindaffectBCI.decoder" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mindaffectBCI.decoder.offline.html" class="btn btn-neutral float-right" title="mindaffectBCI.decoder.offline package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mindaffectBCI.html" class="btn btn-neutral float-left" title="mindaffectBCI package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Mark van Kesteren

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>